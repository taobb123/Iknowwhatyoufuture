import{c as C,n as w,b as S,u as R,a as z,i as L,r as l,j as e,U as T,E as A}from"./index-Du8BMbyU.js";import{e as E}from"./databaseArticleManager-BChPH7IT.js";import{A as M}from"./arrow-left-gJmRVtYo.js";import{C as D}from"./calendar-DRkchnUS.js";import{T as m}from"./thumbs-up-B27OMDBK.js";import{M as I}from"./message-square-CYRk6Jus.js";import{S as B}from"./share-2-CpPIfmJ8.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=C("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),J=()=>{const{id:c}=w(),i=S(),{currentTheme:s}=R();z(),L();const[o,h]=l.useState(null),[g,a]=l.useState(!0),[d,n]=l.useState(null),[t,x]=l.useState(!1),[p,u]=l.useState(0),[b,f]=l.useState(0);l.useEffect(()=>{y()},[c]);const y=async()=>{if(!c){n("文章ID不存在"),a(!1);return}try{a(!0);const r=await E(c);if(!r){n("文章不存在"),a(!1);return}h(r),u(r.likes||0),f(r.views||0),x(!1)}catch(r){console.error("加载文章失败:",r),n("加载文章失败")}finally{a(!1)}},j=()=>{o&&(x(!t),u(r=>t?r-1:r+1),console.log(`${t?"取消点赞":"点赞"}文章:`,o.id))},k=()=>{navigator.share&&o?navigator.share({title:o.title,text:o.content.substring(0,100)+"...",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("链接已复制到剪贴板"))},N=()=>{console.log("收藏文章:",o==null?void 0:o.id)};return g?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:s.colors.primary}}),e.jsx("p",{style:{color:s.colors.text},children:"加载中..."})]})}):d||!o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",style:{color:s.colors.text},children:d||"文章不存在"}),e.jsx("button",{onClick:()=>i(-1),className:"px-6 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.primary,color:s.colors.text,borderRadius:s.borderRadius.lg},children:"返回"})]})}):e.jsx("div",{className:"min-h-screen pt-20",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.surface,color:s.colors.text,borderRadius:s.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=s.colors.surface},children:[e.jsx(M,{size:16}),"返回"]})}),e.jsxs("article",{className:"rounded-xl p-8",style:{backgroundColor:s.colors.surface,borderRadius:s.borderRadius.xl,boxShadow:s.shadows.lg},children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx("span",{className:"px-3 py-1 text-sm rounded-full",style:{backgroundColor:s.colors.primary,color:s.colors.text,borderRadius:s.borderRadius.full},children:o.category})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",style:{color:s.colors.text},children:o.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{size:16}),e.jsx("span",{style:{color:s.colors.textSecondary},children:o.author||"未知作者"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:16}),e.jsx("span",{style:{color:s.colors.textSecondary},children:o.createdAt?new Date(o.createdAt).toLocaleDateString("zh-CN"):"未知日期"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{size:16}),e.jsxs("span",{style:{color:s.colors.textSecondary},children:[b," 次浏览"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{size:16}),e.jsxs("span",{style:{color:s.colors.textSecondary},children:[p," 个赞"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{size:16}),e.jsxs("span",{style:{color:s.colors.textSecondary},children:[o.comments||0," 条评论"]})]})]})]}),e.jsx("div",{className:"prose prose-lg max-w-none mb-8",style:{color:s.colors.text},children:e.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",style:{color:s.colors.text,lineHeight:"1.8",fontSize:"16px"},children:o.content})}),o.tags&&o.tags.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:s.colors.text},children:"标签"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((r,v)=>e.jsxs("span",{className:"px-3 py-1 text-sm rounded-full",style:{backgroundColor:`${s.colors.primary}20`,color:s.colors.primary,borderRadius:s.borderRadius.full},children:["#",r]},v))})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t",children:[e.jsxs("button",{onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${t?"font-semibold":""}`,style:{backgroundColor:t?s.colors.primary:s.colors.surface,color:s.colors.text,borderRadius:s.borderRadius.lg},children:[e.jsx(m,{size:16}),t?"已赞":"点赞"]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.surface,color:s.colors.text,borderRadius:s.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=s.colors.surface},children:[e.jsx(B,{size:16}),"分享"]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.surface,color:s.colors.text,borderRadius:s.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=s.colors.surface},children:[e.jsx(U,{size:16}),"收藏"]})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:s.colors.text},children:"相关文章"}),e.jsx("div",{className:"rounded-lg p-6 text-center",style:{backgroundColor:s.colors.surface},children:e.jsx("p",{className:"text-sm",style:{color:s.colors.textSecondary},children:"暂无相关文章"})})]})]})})};export{J as default};
