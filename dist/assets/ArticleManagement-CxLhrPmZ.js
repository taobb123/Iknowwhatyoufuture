import{j as e,e as z,r as l,i as T,m as S,n as D,o as $,U as E,E as M,d as P,p as R}from"./index-BCw3XfMH.js";import{P as B}from"./ProtectedRoute-gs6-yYNH.js";import{M as F}from"./MarkdownRenderer-By8FJgtO.js";import{P as L}from"./plus-B-9IxP9O.js";import{C as p}from"./calendar-B4Glwse2.js";import{T as U}from"./trash-2-SuqbVO2-.js";const q=()=>{const o=z(),[d,u]=l.useState([]),[f,b]=l.useState([]),[a,x]=l.useState("全部"),[i,m]=l.useState("topic"),[r,n]=l.useState(null);l.useEffect(()=>{T(),setTimeout(()=>{j(),g()},100)},[a,i]);const j=()=>{const s=S();b(["全部",...s])},g=()=>{let s;i==="topic"?s=D(a):s=$(),u(s)},y=s=>{x(s),m("topic")},N=()=>{m("all"),x("全部")},v=s=>{o(`/article-edit/${s}`)},w=(s,t)=>{t.stopPropagation(),n(s)},C=()=>{r&&(R(r)?(g(),h("文章删除成功！","success")):h("删除失败，请重试！","error"),n(null))},k=()=>{n(null)},h=(s,t)=>{const c=document.createElement("div");c.innerHTML=`
      <div style="
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${t==="success"?"#10B981":"#EF4444"};
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 9999;
        font-family: system-ui, -apple-system, sans-serif;
        font-size: 14px;
        font-weight: 500;
      ">
        ${t==="success"?"✅":"❌"} ${s}
      </div>
    `,document.body.appendChild(c),setTimeout(()=>{c.remove()},3e3)},A=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"pt-20"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"文章管理"}),e.jsxs("button",{onClick:()=>o("/article-editor"),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto",children:[e.jsx(L,{size:20}),"创建新文章"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"w-full lg:w-80 flex-shrink-0",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"文章主题"}),e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsx("button",{onClick:()=>y(s),className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${i==="topic"&&a===s?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"所有文章"}),e.jsx("button",{onClick:N,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${i==="all"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:16}),"按时间排列"]})})]})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-200",children:i==="topic"?`主题分类：${a}`:"所有文章（按时间排列）"}),d.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:e.jsx("p",{children:"暂无文章"})}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{onClick:()=>v(s.id),className:"bg-gray-700 rounded-lg p-4 cursor-pointer hover:bg-gray-600 transition-colors group",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white group-hover:text-blue-400 transition-colors flex-1",children:s.title}),e.jsx("div",{className:"flex gap-2 self-end sm:self-auto",children:e.jsx("button",{onClick:t=>w(s.id,t),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition-colors",title:"删除文章",children:e.jsx(U,{size:16})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-400 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{size:12}),s.author]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{size:12}),A(s.createdAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{size:12}),s.views," 浏览"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-400 text-xs rounded",children:s.category}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{size:12}),e.jsx("span",{className:"text-xs text-gray-400",children:s.tags.join(", ")})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${s.status==="published"?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"}`,children:s.status==="published"?"已发布":"草稿"})]}),e.jsx("div",{className:"text-gray-300 text-sm line-clamp-2",children:e.jsx(F,{content:s.content.substring(0,150)+"..."})})]},s.id))})]})})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"确认删除"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"确定要删除这篇文章吗？此操作无法撤销。"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"取消"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500 transition-colors",children:"删除"})]})]})})]})},Q=()=>e.jsx(B,{requiredRole:"admin",children:e.jsx(q,{})});export{Q as default};
