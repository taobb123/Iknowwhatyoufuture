import{n as k,b as C,u as S,r as c,j as e,J as d,U as T,E as w}from"./index-Du8BMbyU.js";import{g as A}from"./databaseBoardManager-DAhEahQI.js";import{g as M}from"./databaseTopicManager-vpp9uVJX.js";import{g as E}from"./databaseArticleManager-BChPH7IT.js";import{A as L}from"./arrow-left-gJmRVtYo.js";import{P as z}from"./plus-BASjHXxA.js";import{M as g}from"./message-square-CYRk6Jus.js";import{C as D}from"./calendar-DRkchnUS.js";import{T as B}from"./thumbs-up-B27OMDBK.js";const O=()=>{const{id:i}=k(),x=C(),{currentTheme:s}=S(),[l,j]=c.useState(null),[a,p]=c.useState([]),[n,m]=c.useState([]),[u,h]=c.useState(!0);c.useEffect(()=>{i&&f(i)},[i]);const f=async o=>{try{console.log("加载板块数据:",o);const y=(await A()).find(t=>t.id===o);if(!y){console.error("板块不存在:",o),x("/community");return}j(y);const b=(await M()).filter(t=>t.boardId===o);p(b);try{const N=(await E()).filter(v=>v.status==="published").slice(0,5);m(N)}catch(t){console.error("加载文章数据失败:",t),m([])}h(!1)}catch(r){console.error("加载板块数据失败:",r),h(!1)}};return u?e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:s.colors.textSecondary}}),e.jsx("p",{style:{color:s.colors.text},children:"加载中..."})]})}):l?e.jsx("div",{className:"min-h-screen text-white pt-20",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>x(-1),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.surface},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.surface},children:[e.jsx(L,{size:16}),"返回"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-4xl",children:l.icon}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:s.colors.text},children:l.name}),e.jsx("p",{style:{color:s.colors.textSecondary},children:l.description})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:a.length}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"主题数量"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:n.length}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"相关文章"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"0"}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"今日讨论"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"0"}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"在线用户"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"主题列表"}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:[e.jsx(z,{size:16}),"创建主题"]})]}),a.length===0?e.jsxs("div",{className:"rounded-lg p-8 text-center",style:{backgroundColor:s.colors.surface},children:[e.jsx("p",{className:"mb-4",style:{color:s.colors.textSecondary},children:"暂无主题"}),e.jsx("button",{className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:"创建第一个主题"})]}):e.jsx("div",{className:"space-y-4",children:a.map(o=>e.jsx("div",{className:"rounded-lg p-6 transition-colors",style:{backgroundColor:s.colors.surface},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=s.colors.surface},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:s.colors.text},children:e.jsx(d,{to:`/topic/${o.id}`,className:"transition-colors",style:{color:s.colors.text},onMouseEnter:r=>{r.currentTarget.style.color=s.colors.primary},onMouseLeave:r=>{r.currentTarget.style.color=s.colors.text},children:o.name})}),e.jsx("p",{className:"text-sm mb-3",style:{color:s.colors.textSecondary},children:o.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",style:{color:s.colors.textSecondary},children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{size:14}),o.articleCount," 篇文章"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{size:14}),new Date(o.createdAt).toLocaleDateString()]})]})]})]})})},o.id))})]}),e.jsxs("div",{className:"space-y-6",children:[n.length>0&&e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.colors.text},children:"最新文章"}),e.jsx("div",{className:"space-y-3",children:n.map(o=>!o||!o.id||!o.title?null:e.jsxs("div",{className:"pb-3 last:border-b-0",style:{borderBottom:`1px solid ${s.colors.border}`},children:[e.jsx("h4",{className:"text-sm font-medium mb-1 line-clamp-2",style:{color:s.colors.text},children:e.jsx(d,{to:`/article/${o.id}`,className:"transition-colors",style:{color:s.colors.text},onMouseEnter:r=>{r.currentTarget.style.color=s.colors.primary},onMouseLeave:r=>{r.currentTarget.style.color=s.colors.text},children:o.title})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",style:{color:s.colors.textSecondary},children:[e.jsx(T,{size:12}),e.jsx("span",{children:o.author||"未知作者"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:o.createdAt?new Date(o.createdAt).toLocaleDateString("zh-CN"):"未知日期"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs mt-1",style:{color:s.colors.textSecondary},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{size:10}),e.jsx("span",{children:o.views||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{size:10}),e.jsx("span",{children:o.likes||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{size:10}),e.jsx("span",{children:o.comments||0})]})]})]},o.id))})]}),n.length===0&&!u&&e.jsxs("div",{className:"rounded-lg p-6 text-center",style:{backgroundColor:s.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:s.colors.text},children:"最新文章"}),e.jsx("p",{className:"text-sm",style:{color:s.colors.textSecondary},children:"暂无文章"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.colors.text},children:"板块信息"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"创建时间"}),e.jsx("span",{style:{color:s.colors.text},children:new Date(l.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"主题数量"}),e.jsx("span",{style:{color:s.colors.text},children:a.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"状态"}),e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:l.isActive?`${s.colors.success}20`:`${s.colors.error}20`,color:l.isActive?s.colors.success:s.colors.error},children:l.isActive?"活跃":"已关闭"})]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",style:{color:s.colors.text},children:"板块不存在"}),e.jsx(d,{to:"/community",className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:"返回社区首页"})]})})};export{O as default};
