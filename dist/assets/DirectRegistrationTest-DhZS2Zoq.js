import{r as n,j as e,W as d,A as u,Y as y}from"./index-BCw3XfMH.js";const v=()=>{const[a,x]=n.useState(""),[o,h]=n.useState(""),[g,t]=n.useState(""),[c,m]=n.useState(null),b=()=>{try{t("测试中...");const s=d(),l=u(),r={currentUser:s,allUsers:l,testUsername:a,testPassword:o};if(m(r),console.log("直接注册测试 - 当前状态:",r),!s){t("❌ 没有当前用户");return}if(!s.isGuest){t("❌ 当前用户不是游客");return}console.log("开始直接调用 registerGuestAsRegular...");const i=y(a,o);console.log("registerGuestAsRegular 成功:",i);const f=d(),j=u();t("✅ 直接注册成功！"),console.log("注册后状态:",{newCurrentUser:f,newAllUsers:j})}catch(s){console.error("直接注册测试错误:",s),t(`❌ 直接注册错误: ${s instanceof Error?s.message:s}`)}},p=()=>{const s=d(),l=u(),r={currentUser:s,allUsers:l,currentUserIsGuest:s==null?void 0:s.isGuest,currentUserType:s==null?void 0:s.userType,currentUsername:s==null?void 0:s.username,allUsernames:l.map(i=>i.username)};m(r),console.log("当前状态检查:",r)};return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"直接注册测试"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"状态检查"}),e.jsx("button",{onClick:p,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mb-4",children:"检查当前状态"}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"当前用户:"}),e.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto",children:JSON.stringify(c.currentUser,null,2)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"所有用户:"}),e.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto max-h-96",children:JSON.stringify(c.allUsers,null,2)})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"直接注册测试"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"测试用户名"}),e.jsx("input",{type:"text",value:a,onChange:s=>x(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"输入要测试的用户名"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"测试密码"}),e.jsx("input",{type:"password",value:o,onChange:s=>h(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"输入测试密码"})]}),e.jsx("button",{onClick:b,className:"w-full py-3 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"直接测试注册"})]})]}),g&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"测试结果"}),e.jsx("p",{className:"text-lg",children:g})]})]})})})};export{v as default};
