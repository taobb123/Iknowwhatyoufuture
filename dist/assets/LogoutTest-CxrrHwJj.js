import{h as N,r as y,j as s,W as v,A as f}from"./index-BCw3XfMH.js";const w=()=>{var i,c,d,a,o;const{state:e,logout:g,getUserDisplayName:t,isGuest:l}=N(),[r,j]=y.useState(null),n=()=>{var h,u;const p=v(),b=f(),x={authState:e,currentUser:p,allUsers:b,isGuest:l(),getUserDisplayName:t(),isAuthenticated:e.isAuthenticated,userType:(h=e.user)==null?void 0:h.userType,isGuestFlag:(u=e.user)==null?void 0:u.isGuest};j(x),console.log("状态检查:",x)},m=()=>{console.log("开始退出登录..."),g(),setTimeout(()=>{console.log("退出登录后状态检查..."),n()},200)};return s.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"退出登录测试"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"当前状态"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"用户ID:"})," ",((i=e.user)==null?void 0:i.id)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户名:"})," ",((c=e.user)==null?void 0:c.username)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户类型:"})," ",((d=e.user)==null?void 0:d.userType)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"是否游客:"})," ",(a=e.user)!=null&&a.isGuest?"是":"否"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"显示名称:"})," ",t()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"是否已认证:"})," ",e.isAuthenticated?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"isGuest():"})," ",l()?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"角色:"})," ",((o=e.user)==null?void 0:o.role)||"无"]})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"操作"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:n,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"检查状态"}),s.jsx("button",{onClick:m,className:"w-full py-3 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"测试退出登录"})]})]}),r&&s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"调试信息"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"AuthContext 状态:"}),s.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto",children:JSON.stringify(r.authState,null,2)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"当前用户:"}),s.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto",children:JSON.stringify(r.currentUser,null,2)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"快速信息:"}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"isGuest():"})," ",r.isGuest?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"显示名称:"})," ",r.getUserDisplayName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"是否已认证:"})," ",r.isAuthenticated?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户类型:"})," ",r.userType||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"isGuest标志:"})," ",r.isGuestFlag?"是":"否"]})]})]})]})]})]})})})};export{w as default};
