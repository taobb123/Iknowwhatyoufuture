import{c as R,j as e,u as G,a as L,r as i,L as T,G as k,H as M,S as C,R as z,X as I}from"./index-CNCBtjWD.js";import{R as $,G as H,u as U,a as _,S as D}from"./useGameData-BLvu6TrE.js";import{S as P}from"./StyledGameCard-ByJhv5ss.js";import{T as S}from"./target-BkFz3uTX.js";import{T as A}from"./trending-up-hnCEj-hB.js";import{U as B}from"./users-qfQ55Uw9.js";import"./home-CYAcrrcZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),O=({error:r,onRetry:o,className:n="",showRetry:t=!0})=>{const a=typeof r=="string"?r:r.message;return e.jsx("div",{className:`mb-8 p-4 bg-red-900/20 border border-red-500/30 rounded-lg ${n}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(q,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-400 font-semibold mb-1",children:"出现错误"}),e.jsx("p",{className:"text-red-300 text-sm",children:a}),t&&o&&e.jsxs("button",{onClick:o,className:"mt-3 inline-flex items-center space-x-2 px-3 py-1.5 bg-red-600/20 hover:bg-red-600/30 text-red-300 rounded-md text-sm transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"重试"})]})]})]})})},E=r=>[{id:"all",name:r("games.allCategories"),icon:k,color:"from-blue-500 to-purple-600",hoverColor:"hover:from-blue-600 hover:to-purple-700",count:0},{id:"casual",name:r("games.casual"),icon:C,color:"from-blue-500 to-cyan-600",hoverColor:"hover:from-blue-600 hover:to-cyan-700",count:0},{id:"action",name:r("games.action"),icon:S,color:"from-green-500 to-teal-600",hoverColor:"hover:from-green-600 hover:to-teal-700",count:0},{id:"puzzle",name:r("games.puzzle"),icon:C,color:"from-yellow-500 to-amber-600",hoverColor:"hover:from-yellow-600 hover:to-amber-700",count:0},{id:"adventure",name:r("games.adventure"),icon:A,color:"from-purple-500 to-pink-600",hoverColor:"hover:from-purple-600 hover:to-pink-700",count:0},{id:"io",name:r("games.io"),icon:B,color:"from-purple-500 to-indigo-600",hoverColor:"hover:from-purple-600 hover:to-indigo-700",count:0},{id:"shooting",name:r("games.shooting"),icon:S,color:"from-red-600 to-orange-600",hoverColor:"hover:from-red-700 hover:to-orange-700",count:0},{id:"other",name:r("games.other"),icon:k,color:"from-gray-500 to-slate-600",hoverColor:"hover:from-gray-600 hover:to-slate-700",count:0}],Y=({games:r,allGames:o,isLoading:n=!1,error:t,onPlay:a,onToggleFavorite:u,onCategoryChange:h,selectedCategory:b="all",className:x="",emptyMessage:d="暂无游戏"})=>{var w;const{currentTheme:s}=G(),{t:g}=L(),p=b,v=o&&o.length>0?o:r,y=i.useMemo(()=>E(g).map(c=>{const m=c.id==="all"?v.length:v.filter(F=>(F.category||"other")===c.id).length;return{...c,count:m}}),[v,g]),j=i.useCallback(l=>{l!==p&&(h==null||h(l))},[p,h]),N=r;return t?e.jsx(O,{error:t,className:x}):n?e.jsx("div",{className:`flex items-center justify-center py-12 ${x}`,children:e.jsx(T,{text:"正在加载游戏..."})}):e.jsxs("div",{className:`rounded-2xl p-6 shadow-2xl ${x}`,style:{background:`linear-gradient(135deg, ${s.colors.surface}, ${s.colors.background}, ${s.colors.surface})`,borderRadius:s.borderRadius.xl,boxShadow:s.shadows.xl},children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",style:{color:s.colors.text},children:[e.jsx(k,{className:"w-6 h-6 mr-2",style:{color:s.colors.secondary}}),g("games.categories")]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:y.map(l=>{const f=l.icon,c=p===l.id;return e.jsxs("button",{onClick:()=>j(l.id),className:"relative group p-4 rounded-xl transition-all duration-300 transform",style:{backgroundColor:c?s.colors.primary:s.colors.surface,borderRadius:s.borderRadius.xl,border:`2px solid ${c?s.colors.accent:"transparent"}`,transform:c?"scale(1.05)":"scale(1)",boxShadow:c?s.shadows.lg:"none"},onMouseEnter:m=>{c||(m.currentTarget.style.backgroundColor=s.colors.hover,m.currentTarget.style.transform="scale(1.05)",m.currentTarget.style.boxShadow=s.shadows.lg,m.currentTarget.style.borderColor=s.colors.border)},onMouseLeave:m=>{c||(m.currentTarget.style.backgroundColor=s.colors.surface,m.currentTarget.style.transform="scale(1)",m.currentTarget.style.boxShadow="none",m.currentTarget.style.borderColor="transparent")},children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"p-3 rounded-lg transition-all duration-300",style:{backgroundColor:c?"rgba(255, 255, 255, 0.2)":s.colors.hover,borderRadius:s.borderRadius.lg},children:e.jsx(f,{className:"w-6 h-6",style:{color:s.colors.text}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold",style:{color:s.colors.text},children:l.name}),e.jsxs("div",{className:"text-xs",style:{color:s.colors.textSecondary},children:[l.count," ",g("games.gamesCount")]})]})]}),c&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:s.colors.secondary,borderRadius:s.borderRadius.full}})]},l.id)})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold",style:{color:s.colors.text},children:[p==="all"?g("games.allGames"):(w=E(g).find(l=>l.id===p))==null?void 0:w.name,e.jsxs("span",{className:"ml-2 text-sm",style:{color:s.colors.textSecondary},children:["(",N.length," ",g("games.gamesCount"),")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",style:{color:s.colors.textSecondary},children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:g("games.clickToFavorite")})]})]}),N.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",style:{color:s.colors.textSecondary},children:"🎮"}),e.jsx("p",{className:"text-lg",style:{color:s.colors.textSecondary},children:d}),e.jsx("p",{className:"text-sm mt-2",style:{color:s.colors.textSecondary},children:"试试选择其他分类"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map(l=>e.jsx(H,{children:e.jsx(P,{game:l,variant:"homepage",onPlay:a,onToggleFavorite:u,showRating:!0,showControls:!0})},l.id))})]})]})},K=()=>{const[r,o]=i.useState(!1);i.useEffect(()=>{const t=()=>{const a=!!document.fullscreenElement;o(a)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t),()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t)}},[]);const n=i.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(t){console.error("全屏切换失败:",t)}},[]);return{isFullscreen:r,toggleFullscreen:n}},W=({adSlot:r,adFormat:o="auto",adStyle:n={display:"block"},className:t=""})=>(z.useEffect(()=>{const a=document.createElement("script");a.async=!0,a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID",a.crossOrigin="anonymous",document.querySelector('script[src*="googlesyndication.com"]')||document.head.appendChild(a);try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch{}},[]),e.jsx("div",{className:`ad-banner ${t}`,children:e.jsx("ins",{className:"adsbygoogle",style:n,"data-ad-client":"ca-pub-YOUR_PUBLISHER_ID","data-ad-slot":r,"data-ad-format":o,"data-full-width-responsive":"true"})})),X=({game:r,isOpen:o,onClose:n,isLoading:t=!1,onLoadComplete:a})=>{const{isFullscreen:u,toggleFullscreen:h}=K(),[b,x]=i.useState(!0);return i.useEffect(()=>{const d=s=>{s.key==="Escape"&&o&&n()};if(o)return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[o,n]),i.useEffect(()=>{if(o&&r){x(!0);const d=setTimeout(()=>{x(!1),a==null||a()},2e3);return()=>clearTimeout(d)}},[o,r,a]),!o||!r?null:e.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col animate-in fade-in duration-300",onClick:n,children:[e.jsx("div",{className:"flex-shrink-0 z-10",onClick:d=>d.stopPropagation(),children:e.jsx("div",{className:"bg-gradient-to-b from-black/90 to-transparent p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white drop-shadow-lg",children:r.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:h,className:"p-3 bg-black/50 hover:bg-black/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-white/40",title:u?"退出全屏":"全屏",children:u?"⤓":"⤢"}),e.jsx("button",{onClick:n,className:"p-3 bg-black/50 hover:bg-red-600/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-red-400/60",title:"关闭游戏",children:e.jsx(I,{size:20})})]})]})})}),e.jsxs("div",{className:"flex-1 relative",onClick:d=>d.stopPropagation(),children:[(t||b)&&e.jsx("div",{className:"absolute top-4 right-4 z-30",children:e.jsx(W,{adSlot:"0987654321",adFormat:"rectangle",className:"w-48 h-32 bg-gray-800 rounded-lg"})}),e.jsxs("div",{className:"w-full h-full bg-black relative overflow-hidden",children:[(t||b)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",children:e.jsx(T,{text:"正在加载游戏..."})}),e.jsxs("div",{className:"w-full h-full relative game-iframe-container",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .game-iframe-container iframe {
                  width: 100% !important;
                  height: 100% !important;
                  border: none !important;
                  outline: none !important;
                  position: relative;
                  z-index: 1;
                }
                
                .game-iframe-container iframe {
                  filter: contrast(1.05) brightness(1.02) saturate(1.1);
                  transform: scale(1.01);
                  transform-origin: center;
                }
                
                .game-iframe-container::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  right: 0;
                  height: 80px;
                  background: linear-gradient(to bottom, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
                
                .game-iframe-container::after {
                  content: '';
                  position: absolute;
                  bottom: 0;
                  left: 0;
                  right: 0;
                  height: 100px;
                  background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
              `}}),e.jsx("div",{className:"w-full h-full relative",dangerouslySetInnerHTML:{__html:r.iframe}})]})]})]})]})},J=()=>{const[r,o]=i.useState(null),[n,t]=i.useState(!1),[a,u]=i.useState(!1),h=i.useCallback(d=>{o(d),t(!0),u(!0)},[]),b=i.useCallback(()=>{o(null),t(!1),u(!1)},[]),x=i.useCallback(()=>{u(!1)},[]);return{selectedGame:r,isModalOpen:n,isGameLoading:a,openGame:h,closeGame:b,handleLoadComplete:x}};function oe(){const{games:r,filteredGames:o,isLoading:n,error:t,selectedCategory:a}=U(),{toggleFavorite:u,setCategory:h}=_(),{selectedGame:b,isModalOpen:x,isGameLoading:d,openGame:s,closeGame:g,handleLoadComplete:p}=J(),{currentTheme:v}=G(),{t:y}=L(),j=a,N=f=>{const c=o.find(m=>m.id===f);c&&s(c)},w=f=>{u(f)},l=i.useCallback(f=>{f!==j&&h(f)},[j,h]);return e.jsxs("div",{className:"min-h-screen text-white",style:{backgroundColor:v.colors.background},children:[e.jsx("div",{className:"pt-16"}),e.jsx(D,{title:`${y("home.title")} - ${y("home.subtitle")} | Iknowwhatyoufuture`,description:y("home.welcomeMessage"),keywords:"热门游戏,在线游戏,免费游戏,游戏中心,动作游戏,冒险游戏,益智游戏,休闲游戏,无忧无虑",canonical:"https://streetracer.online/"}),e.jsxs("div",{className:"container mx-auto px-4 py-4 pt-20",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:v.colors.secondary},children:y("home.title")}),e.jsx("p",{className:"text-sm",style:{color:v.colors.textSecondary},children:y("home.welcomeMessage")})]}),e.jsx(Y,{games:o,allGames:r,isLoading:n,error:t,onPlay:N,onToggleFavorite:w,onCategoryChange:l,selectedCategory:j})]}),e.jsx(X,{game:b,isOpen:x,onClose:g,isLoading:d,onLoadComplete:p})]})}export{oe as default};
