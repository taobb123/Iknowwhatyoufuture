import{j as e,f as S,u as A,r as c,i as E,p as z,q as D,s as L,U as $,E as R,d as P,t as B}from"./index-DjexH7CO.js";import{P as F}from"./ProtectedRoute-JgbDXx5-.js";import{M as q}from"./MarkdownRenderer-qs_zk1gA.js";import{P as U}from"./plus-CsLKypcW.js";import{C as h}from"./calendar-DcrdUgBW.js";import{T as H}from"./trash-2-CwppPFeO.js";const G=()=>{const d=S(),{currentTheme:o}=A(),[x,f]=c.useState([]),[y,b]=c.useState([]),[l,u]=c.useState("全部"),[t,m]=c.useState("topic"),[a,n]=c.useState(null);c.useEffect(()=>{E(),setTimeout(()=>{j(),g()},100)},[l,t]);const j=()=>{const s=z();b(["全部",...s])},g=()=>{let s;t==="topic"?s=D(l):s=L(),f(s)},C=s=>{u(s),m("topic")},v=()=>{m("all"),u("全部")},N=s=>{d(`/article-edit/${s}`)},k=(s,r)=>{r.stopPropagation(),n(s)},w=()=>{a&&(B(a)?(g(),p("文章删除成功！","success")):p("删除失败，请重试！","error"),n(null))},T=()=>{n(null)},p=(s,r)=>{const i=document.createElement("div");i.innerHTML=`
      <div style="
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${r==="success"?"#10B981":"#EF4444"};
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 9999;
        font-family: system-ui, -apple-system, sans-serif;
        font-size: 14px;
        font-weight: 500;
      ">
        ${r==="success"?"✅":"❌"} ${s}
      </div>
    `,document.body.appendChild(i),setTimeout(()=>{i.remove()},3e3)},M=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen text-white",style:{backgroundColor:o.colors.background},children:[e.jsx("div",{className:"pt-20"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",style:{color:o.colors.text},children:"文章管理"}),e.jsxs("button",{onClick:()=>d("/article-editor"),className:"flex items-center justify-center gap-2 px-4 py-2 text-white rounded-lg transition-colors w-full sm:w-auto",style:{backgroundColor:o.colors.primary},onMouseEnter:s=>{s.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:s=>{s.currentTarget.style.backgroundColor=o.colors.primary},children:[e.jsx(U,{size:20}),"创建新文章"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"w-full lg:w-80 flex-shrink-0",children:e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:o.colors.surface},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:o.colors.text},children:"文章主题"}),e.jsx("div",{className:"space-y-2",children:y.map(s=>e.jsx("button",{onClick:()=>C(s),className:"w-full text-left px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:t==="topic"&&l===s?o.colors.primary:o.colors.surface,color:o.colors.text},onMouseEnter:r=>{t==="topic"&&l===s||(r.currentTarget.style.backgroundColor=o.colors.hover)},onMouseLeave:r=>{t==="topic"&&l===s||(r.currentTarget.style.backgroundColor=o.colors.surface)},children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:o.colors.text},children:"所有文章"}),e.jsx("button",{onClick:v,className:"w-full text-left px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:t==="all"?o.colors.primary:o.colors.surface,color:o.colors.text},onMouseEnter:s=>{t!=="all"&&(s.currentTarget.style.backgroundColor=o.colors.hover)},onMouseLeave:s=>{t!=="all"&&(s.currentTarget.style.backgroundColor=o.colors.surface)},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{size:16}),"按时间排列"]})})]})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"rounded-lg p-4 sm:p-6",style:{backgroundColor:o.colors.surface},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",style:{color:o.colors.text},children:t==="topic"?`主题分类：${l}`:"所有文章（按时间排列）"}),x.length===0?e.jsx("div",{className:"text-center py-12",style:{color:o.colors.textSecondary},children:e.jsx("p",{children:"暂无文章"})}):e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs("div",{onClick:()=>N(s.id),className:"rounded-lg p-4 cursor-pointer transition-colors group",style:{backgroundColor:o.colors.surface,borderRadius:o.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=o.colors.surface},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold transition-colors flex-1",style:{color:o.colors.text},children:s.title}),e.jsx("div",{className:"flex gap-2 self-end sm:self-auto",children:e.jsx("button",{onClick:r=>k(s.id,r),className:"p-2 rounded-lg transition-colors",style:{color:o.colors.error},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},title:"删除文章",children:e.jsx(H,{size:16})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm mb-3",style:{color:o.colors.textSecondary},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{size:12}),s.author]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{size:12}),M(s.createdAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{size:12}),s.views," 浏览"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded",style:{backgroundColor:`${o.colors.primary}20`,color:o.colors.primary},children:s.category}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{size:12}),e.jsx("span",{className:"text-xs",style:{color:o.colors.textSecondary},children:s.tags.join(", ")})]}),e.jsx("span",{className:"px-2 py-1 text-xs rounded",style:{backgroundColor:s.status==="published"?`${o.colors.success}20`:`${o.colors.warning}20`,color:s.status==="published"?o.colors.success:o.colors.warning},children:s.status==="published"?"已发布":"草稿"})]}),e.jsx("div",{className:"text-sm line-clamp-2",style:{color:o.colors.textSecondary},children:e.jsx(q,{content:s.content.substring(0,150)+"..."})})]},s.id))})]})})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"rounded-lg p-6 max-w-md w-full mx-4",style:{backgroundColor:o.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:o.colors.text},children:"确认删除"}),e.jsx("p",{className:"mb-6",style:{color:o.colors.textSecondary},children:"确定要删除这篇文章吗？此操作无法撤销。"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:o.colors.surface},onMouseEnter:s=>{s.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:s=>{s.currentTarget.style.backgroundColor=o.colors.surface},children:"取消"}),e.jsx("button",{onClick:w,className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:o.colors.error},onMouseEnter:s=>{s.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:s=>{s.currentTarget.style.backgroundColor=o.colors.error},children:"删除"})]})]})})]})},W=()=>e.jsx(F,{requiredRole:"admin",children:e.jsx(G,{})});export{W as default};
