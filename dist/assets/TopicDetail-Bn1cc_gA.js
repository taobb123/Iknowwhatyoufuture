import{n as v,b as N,u as k,r as a,M as C,O as T,j as e,J as c,U as S,E as M}from"./index-Du8BMbyU.js";import{g as w}from"./databaseArticleManager-BChPH7IT.js";import{A as E}from"./arrow-left-gJmRVtYo.js";import{P as L}from"./plus-BASjHXxA.js";import{C as A}from"./calendar-DRkchnUS.js";import{T as z}from"./thumbs-up-B27OMDBK.js";const O=()=>{const{id:i}=v(),m=N(),{currentTheme:s}=k(),[l,y]=a.useState(null),[t,h]=a.useState(null),[n,g]=a.useState([]),[j,u]=a.useState(!0);a.useEffect(()=>{i&&p(i)},[i]);const p=o=>{try{console.log("加载主题数据:",o);const d=C().find(x=>x.id===o);if(!d){console.error("主题不存在:",o),m("/community");return}y(d);const b=T().find(x=>x.id===d.boardId);h(b);const f=w();g(f.slice(0,10)),u(!1)}catch(r){console.error("加载主题数据失败:",r),u(!1)}};return j?e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:s.colors.textSecondary}}),e.jsx("p",{style:{color:s.colors.text},children:"加载中..."})]})}):l?e.jsx("div",{className:"min-h-screen text-white pt-20",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-6",style:{color:s.colors.textSecondary},children:[e.jsx(c,{to:"/community",className:"transition-colors",style:{color:s.colors.textSecondary},onMouseEnter:o=>{o.currentTarget.style.color=s.colors.text},onMouseLeave:o=>{o.currentTarget.style.color=s.colors.textSecondary},children:"社区首页"}),e.jsx("span",{children:"›"}),t&&e.jsxs(e.Fragment,{children:[e.jsx(c,{to:`/board/${t.id}`,className:"transition-colors",style:{color:s.colors.textSecondary},onMouseEnter:o=>{o.currentTarget.style.color=s.colors.text},onMouseLeave:o=>{o.currentTarget.style.color=s.colors.textSecondary},children:t.name}),e.jsx("span",{children:"›"})]}),e.jsx("span",{style:{color:s.colors.text},children:l.name})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>m(-1),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:s.colors.surface},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.surface},children:[e.jsx(E,{size:16}),"返回"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-4xl",children:l.icon}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:s.colors.text},children:l.name}),e.jsx("p",{style:{color:s.colors.textSecondary},children:l.description})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:n.length}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"文章数量"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"0"}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"今日新增"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"0"}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"总浏览"})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"0"}),e.jsx("div",{style:{color:s.colors.textSecondary},children:"总点赞"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:s.colors.text},children:"文章列表"}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:[e.jsx(L,{size:16}),"发布文章"]})]}),n.length===0?e.jsxs("div",{className:"rounded-lg p-8 text-center",style:{backgroundColor:s.colors.surface},children:[e.jsx("p",{className:"mb-4",style:{color:s.colors.textSecondary},children:"暂无文章"}),e.jsx("button",{className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:"发布第一篇文章"})]}):e.jsx("div",{className:"space-y-4",children:n.map(o=>e.jsx("div",{className:"rounded-lg p-6 transition-colors",style:{backgroundColor:s.colors.surface},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=s.colors.surface},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:s.colors.text},children:e.jsx(c,{to:`/article/${o.id}`,className:"transition-colors",style:{color:s.colors.text},onMouseEnter:r=>{r.currentTarget.style.color=s.colors.primary},onMouseLeave:r=>{r.currentTarget.style.color=s.colors.text},children:o.title})}),e.jsxs("p",{className:"text-sm mb-3 line-clamp-2",style:{color:s.colors.textSecondary},children:[o.content.substring(0,150),"..."]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",style:{color:s.colors.textSecondary},children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{size:14}),o.author]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14}),new Date(o.createdAt).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{size:14}),"0 浏览"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{size:14}),"0 点赞"]})]})]})})},o.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.colors.text},children:"主题信息"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"所属板块"}),e.jsx("span",{style:{color:s.colors.text},children:t?e.jsx(c,{to:`/board/${t.id}`,className:"transition-colors",style:{color:s.colors.text},onMouseEnter:o=>{o.currentTarget.style.color=s.colors.primary},onMouseLeave:o=>{o.currentTarget.style.color=s.colors.text},children:t.name}):"未知板块"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"创建时间"}),e.jsx("span",{style:{color:s.colors.text},children:new Date(l.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"文章数量"}),e.jsx("span",{style:{color:s.colors.text},children:n.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:s.colors.textSecondary},children:"状态"}),e.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:l.isActive?`${s.colors.success}40`:`${s.colors.error}40`,color:l.isActive?s.colors.success:s.colors.error},children:l.isActive?"活跃":"已关闭"})]})]})]}),t&&e.jsxs("div",{className:"rounded-lg p-6",style:{backgroundColor:s.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.colors.text},children:"相关主题"}),e.jsx("div",{className:"space-y-2",children:e.jsxs(c,{to:`/board/${t.id}`,className:"block text-sm transition-colors",style:{color:s.colors.textSecondary},onMouseEnter:o=>{o.currentTarget.style.color=s.colors.text},onMouseLeave:o=>{o.currentTarget.style.color=s.colors.textSecondary},children:["查看 ",t.name," 的所有主题"]})})]})]})]})]})}):e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:s.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",style:{color:s.colors.text},children:"主题不存在"}),e.jsx(c,{to:"/community",className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:s.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=s.colors.primary},children:"返回社区首页"})]})})};export{O as default};
