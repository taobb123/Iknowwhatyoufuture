import{h as N,r as c,j as e,A as l,W as m}from"./index-BCw3XfMH.js";const U=()=>{var d,x,u;const{state:n,registerGuest:h}=N(),[r,p]=c.useState(""),[o,b]=c.useState(""),[i,t]=c.useState(""),j=async()=>{try{t("测试中...");const s=m(),g=l();console.log("注册前状态:",{currentUser:s,allUsers:g,testUsername:r});const y=g.find(a=>a.username===r);if(console.log("用户名检查结果:",y),!s||!s.isGuest){t("❌ 当前用户不是游客，无法注册");return}if(await h(r,o)){t("✅ 注册成功！");const a=m(),f=l();console.log("注册后状态:",{newCurrentUser:a,newAllUsers:f})}else t("❌ 注册失败 - registerGuest 返回 false")}catch(s){console.error("注册测试错误:",s),t(`❌ 注册错误: ${s instanceof Error?s.message:s}`)}};return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"简单注册测试"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"当前状态"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"当前用户:"})," ",((d=n.user)==null?void 0:d.username)||"无"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"用户类型:"})," ",((x=n.user)==null?void 0:x.userType)||"无"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"是否游客:"})," ",(u=n.user)!=null&&u.isGuest?"是":"否"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"所有用户数:"})," ",l().length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"所有用户名:"})," ",l().map(s=>s.username).join(", ")]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"测试注册"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"测试用户名"}),e.jsx("input",{type:"text",value:r,onChange:s=>p(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"输入要测试的用户名"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"测试密码"}),e.jsx("input",{type:"password",value:o,onChange:s=>b(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"输入测试密码"})]}),e.jsx("button",{onClick:j,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"测试注册"})]})]}),i&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"测试结果"}),e.jsx("p",{className:"text-lg",children:i})]})]})})})};export{U as default};
