import{u as C,a as L,r as l,K as g,M as b,O as i,j as e,Q as d}from"./index-CNCBtjWD.js";import{g as p,a as j}from"./databaseBoardManager-A_2RlDqO.js";const A=()=>{const{currentTheme:o}=C(),{t}=L(),[m,x]=l.useState([]),[u,h]=l.useState([]),[a,y]=l.useState([]),[v,c]=l.useState(!0);l.useEffect(()=>{N()},[]);const N=async()=>{try{console.log("开始加载社区数据...");const s=await p(),r=g(),n=b().slice(0,5);if(console.log("加载的数据:",{boards:s.length,topics:r.length,articles:n.length}),s.length===0||r.length===0){console.log("数据不存在，创建测试数据..."),f();return}x(s),h(r),y(n),c(!1)}catch(s){console.error("加载数据失败:",s),c(!1)}},f=async()=>{try{console.log("创建测试数据...");const s=await j({name:"游戏攻略",description:"分享各种游戏的攻略和技巧",icon:"🎮",color:"from-blue-600 to-purple-600",order:0,isActive:!0}),r=await j({name:"技术讨论",description:"前端开发和技术交流",icon:"💻",color:"from-green-600 to-teal-600",order:0,isActive:!0}),n=i({name:"新手入门",description:"适合新手的游戏攻略",boardId:s.id,icon:"🌟",color:"from-yellow-500 to-orange-500"}),M=i({name:"高级技巧",description:"高级玩家分享的技巧",boardId:s.id,icon:"⚡",color:"from-purple-500 to-pink-500"}),w=i({name:"前端开发",description:"前端技术讨论",boardId:r.id,icon:"🎨",color:"from-indigo-500 to-blue-500"});console.log("测试数据创建完成");const T=await p(),k=g(),S=b().slice(0,5);x(T),h(k),y(S),c(!1)}catch(s){console.error("创建测试数据失败:",s),c(!1)}};return v?e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:o.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:o.colors.textSecondary}}),e.jsx("p",{style:{color:o.colors.text},children:"加载中..."})]})}):e.jsx("div",{className:"min-h-screen text-white pt-20",style:{backgroundColor:o.colors.background},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"rounded-2xl p-8 mb-8",style:{background:`linear-gradient(135deg, ${o.colors.primary}, ${o.colors.secondary})`,borderRadius:o.borderRadius.xl},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",style:{color:o.colors.text},children:t("community.title")}),e.jsx("p",{className:"text-xl mb-6",style:{color:o.colors.textSecondary},children:t("community.subtitle")}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:o.colors.text},children:m.length}),e.jsx("div",{style:{color:o.colors.textSecondary},children:t("community.boards")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:o.colors.text},children:u.length}),e.jsx("div",{style:{color:o.colors.textSecondary},children:t("community.topics")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:o.colors.text},children:a.length}),e.jsx("div",{style:{color:o.colors.textSecondary},children:t("community.articles")})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:o.colors.text},children:t("community.hotBoards")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsxs("div",{className:"rounded-xl p-6 transition-colors",style:{backgroundColor:o.colors.surface,borderRadius:o.borderRadius.xl},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=o.colors.surface},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-3xl mr-3",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:o.colors.text},children:s.name}),e.jsxs("p",{className:"text-sm",style:{color:o.colors.textSecondary},children:[s.topicCount," 个主题"]})]})]}),e.jsx("p",{className:"mb-4",style:{color:o.colors.textSecondary},children:s.description}),e.jsx(d,{to:`/board/${s.id}`,className:"inline-flex items-center transition-colors",style:{color:o.colors.primary},onMouseEnter:r=>{r.currentTarget.style.color=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.color=o.colors.primary},children:"进入板块 →"})]},s.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:o.colors.text},children:t("community.hotTopics")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(s=>e.jsxs("div",{className:"rounded-lg p-4 transition-colors",style:{backgroundColor:o.colors.surface,borderRadius:o.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=o.colors.surface},children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:s.icon}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:o.colors.text},children:s.name})]}),e.jsx("p",{className:"text-sm mb-2",style:{color:o.colors.textSecondary},children:s.description}),e.jsx(d,{to:`/topic/${s.id}`,className:"text-sm transition-colors",style:{color:o.colors.primary},onMouseEnter:r=>{r.currentTarget.style.color=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.color=o.colors.primary},children:"查看主题 →"})]},s.id))})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:o.colors.text},children:"最新文章"}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"rounded-lg p-4 transition-colors",style:{backgroundColor:o.colors.surface,borderRadius:o.borderRadius.lg},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor=o.colors.surface},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:o.colors.text},children:s.title}),e.jsxs("p",{className:"text-sm mb-2",style:{color:o.colors.textSecondary},children:[s.content.substring(0,100),"..."]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm",style:{color:o.colors.textSecondary},children:["作者: ",s.author]}),e.jsx(d,{to:`/article/${s.id}`,className:"text-sm transition-colors",style:{color:o.colors.primary},onMouseEnter:r=>{r.currentTarget.style.color=o.colors.hover},onMouseLeave:r=>{r.currentTarget.style.color=o.colors.primary},children:"阅读全文 →"})]})]},s.id))})]})]})})};export{A as default};
