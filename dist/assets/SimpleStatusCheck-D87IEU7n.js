import{h as b,r as d,j as e,W as j,A as p,Z as y}from"./index-BCw3XfMH.js";const f=()=>{var n,c,i;const{state:r}=b(),[x,t]=d.useState("点击按钮查看状态"),[l,o]=d.useState(!1),a=()=>{console.log("按钮被点击了！"),o(!0),t("检查中...");try{const s=j(),u=p();console.log("当前状态检查:",{currentUser:s,allUsers:u,authState:r});const m=`当前用户: ${(s==null?void 0:s.username)||"无"}, 类型: ${(s==null?void 0:s.userType)||"无"}, 是否游客: ${s!=null&&s.isGuest?"是":"否"}`;t(m)}catch(s){console.error("检查状态失败:",s),t(`检查失败: ${s}`)}finally{o(!1)}},h=()=>{console.log("创建游客按钮被点击了！"),o(!0),t("创建游客中...");try{const s=y();console.log("游客用户已创建:",s),t("✅ 游客用户已创建"),setTimeout(()=>{a()},500)}catch(s){console.error("创建游客失败:",s),t(`❌ 创建游客失败: ${s}`),o(!1)}},g=()=>{console.log("清除用户按钮被点击了！"),o(!0),t("清除中...");try{localStorage.removeItem("gamehub_current_user"),console.log("当前用户已清除"),t("✅ 当前用户已清除"),setTimeout(()=>{a()},500)}catch(s){console.error("清除用户失败:",s),t(`❌ 清除用户失败: ${s}`),o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"简单状态检查"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"当前状态"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"AuthContext 用户:"})," ",((n=r.user)==null?void 0:n.username)||"无"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"用户类型:"})," ",((c=r.user)==null?void 0:c.userType)||"无"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"是否游客:"})," ",(i=r.user)!=null&&i.isGuest?"是":"否"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"是否已认证:"})," ",r.isAuthenticated?"是":"否"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"操作"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:a,disabled:l,className:`w-full py-3 px-4 rounded-lg transition-colors ${l?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:l?"检查中...":"检查当前状态"}),e.jsx("button",{onClick:h,disabled:l,className:`w-full py-3 px-4 rounded-lg transition-colors ${l?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:l?"创建中...":"创建游客用户"}),e.jsx("button",{onClick:g,disabled:l,className:`w-full py-3 px-4 rounded-lg transition-colors ${l?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:l?"清除中...":"清除当前用户"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"结果"}),e.jsx("p",{className:"text-lg",children:x})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"调试信息"}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"页面加载时间:"})," ",new Date().toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"AuthContext 状态:"})," ",JSON.stringify(r,null,2)]})]})]})]})})})};export{f as default};
