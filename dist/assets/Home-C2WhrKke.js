import{c as D,j as e,u as R,a as M,r as i,L as I,G as T,H as U,S as L,R as _,X as A,b as P,C as B}from"./index-Du8BMbyU.js";import{R as q,G as O,u as Y,a as K,S as W}from"./useGameData-DcCl1A7y.js";import{S as X}from"./StyledGameCard-CHRr0zvT.js";import{T as z}from"./target-D-dHpJgz.js";import{T as $}from"./trending-up-08UJiPdc.js";import{U as J}from"./users-C6oVpysR.js";import"./home-DbBJNVgf.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=D("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),V=({error:o,onRetry:a,className:c="",showRetry:s=!0})=>{const l=typeof o=="string"?o:o.message;return e.jsx("div",{className:`mb-8 p-4 bg-red-900/20 border border-red-500/30 rounded-lg ${c}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Q,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-400 font-semibold mb-1",children:"出现错误"}),e.jsx("p",{className:"text-red-300 text-sm",children:l}),s&&a&&e.jsxs("button",{onClick:a,className:"mt-3 inline-flex items-center space-x-2 px-3 py-1.5 bg-red-600/20 hover:bg-red-600/30 text-red-300 rounded-md text-sm transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"重试"})]})]})]})})},F=o=>[{id:"all",name:o("games.allCategories"),icon:T,color:"from-blue-500 to-purple-600",hoverColor:"hover:from-blue-600 hover:to-purple-700",count:0},{id:"casual",name:o("games.casual"),icon:L,color:"from-blue-500 to-cyan-600",hoverColor:"hover:from-blue-600 hover:to-cyan-700",count:0},{id:"action",name:o("games.action"),icon:z,color:"from-green-500 to-teal-600",hoverColor:"hover:from-green-600 hover:to-teal-700",count:0},{id:"puzzle",name:o("games.puzzle"),icon:L,color:"from-yellow-500 to-amber-600",hoverColor:"hover:from-yellow-600 hover:to-amber-700",count:0},{id:"adventure",name:o("games.adventure"),icon:$,color:"from-purple-500 to-pink-600",hoverColor:"hover:from-purple-600 hover:to-pink-700",count:0},{id:"io",name:o("games.io"),icon:J,color:"from-purple-500 to-indigo-600",hoverColor:"hover:from-purple-600 hover:to-indigo-700",count:0},{id:"shooting",name:o("games.shooting"),icon:z,color:"from-red-600 to-orange-600",hoverColor:"hover:from-red-700 hover:to-orange-700",count:0},{id:"other",name:o("games.other"),icon:T,color:"from-gray-500 to-slate-600",hoverColor:"hover:from-gray-600 hover:to-slate-700",count:0}],Z=({games:o,allGames:a,isLoading:c=!1,error:s,onPlay:l,onToggleFavorite:x,onCategoryChange:h,selectedCategory:g="all",className:t="",emptyMessage:n="暂无游戏"})=>{var w;const{currentTheme:r}=R(),{t:f}=M(),p=g,v=a&&a.length>0?a:o,y=i.useMemo(()=>F(f).map(u=>{const m=u.id==="all"?v.length:v.filter(G=>(G.category||"other")===u.id).length;return{...u,count:m}}),[v,f]),S=i.useCallback(d=>{d!==p&&(h==null||h(d))},[p,h]),j=o;return s?e.jsx(V,{error:s,className:t}):c?e.jsx("div",{className:`flex items-center justify-center py-12 ${t}`,children:e.jsx(I,{text:"正在加载游戏..."})}):e.jsxs("div",{className:`rounded-2xl p-6 shadow-2xl ${t}`,style:{background:`linear-gradient(135deg, ${r.colors.surface}, ${r.colors.background}, ${r.colors.surface})`,borderRadius:r.borderRadius.xl,boxShadow:r.shadows.xl},children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",style:{color:r.colors.text},children:[e.jsx(T,{className:"w-6 h-6 mr-2",style:{color:r.colors.secondary}}),f("games.categories")]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:y.map(d=>{const k=d.icon,u=p===d.id;return e.jsxs("button",{onClick:()=>S(d.id),className:"relative group p-4 rounded-xl transition-all duration-300 transform",style:{backgroundColor:u?r.colors.primary:r.colors.surface,borderRadius:r.borderRadius.xl,border:`2px solid ${u?r.colors.accent:"transparent"}`,transform:u?"scale(1.05)":"scale(1)",boxShadow:u?r.shadows.lg:"none"},onMouseEnter:m=>{u||(m.currentTarget.style.backgroundColor=r.colors.hover,m.currentTarget.style.transform="scale(1.05)",m.currentTarget.style.boxShadow=r.shadows.lg,m.currentTarget.style.borderColor=r.colors.border)},onMouseLeave:m=>{u||(m.currentTarget.style.backgroundColor=r.colors.surface,m.currentTarget.style.transform="scale(1)",m.currentTarget.style.boxShadow="none",m.currentTarget.style.borderColor="transparent")},children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"p-3 rounded-lg transition-all duration-300",style:{backgroundColor:u?"rgba(255, 255, 255, 0.2)":r.colors.hover,borderRadius:r.borderRadius.lg},children:e.jsx(k,{className:"w-6 h-6",style:{color:r.colors.text}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold",style:{color:r.colors.text},children:d.name}),e.jsxs("div",{className:"text-xs",style:{color:r.colors.textSecondary},children:[d.count," ",f("games.gamesCount")]})]})]}),u&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:r.colors.secondary,borderRadius:r.borderRadius.full}})]},d.id)})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold",style:{color:r.colors.text},children:[p==="all"?f("games.allGames"):(w=F(f).find(d=>d.id===p))==null?void 0:w.name,e.jsxs("span",{className:"ml-2 text-sm",style:{color:r.colors.textSecondary},children:["(",j.length," ",f("games.gamesCount"),")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",style:{color:r.colors.textSecondary},children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:f("games.clickToFavorite")})]})]}),j.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",style:{color:r.colors.textSecondary},children:"🎮"}),e.jsx("p",{className:"text-lg",style:{color:r.colors.textSecondary},children:n}),e.jsx("p",{className:"text-sm mt-2",style:{color:r.colors.textSecondary},children:"试试选择其他分类"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map(d=>e.jsx(O,{children:e.jsx(X,{game:d,variant:"homepage",onPlay:l,onToggleFavorite:x,showRating:!0,showControls:!0})},d.id))})]})]})},ee=()=>{const[o,a]=i.useState(!1);i.useEffect(()=>{const s=()=>{const l=!!document.fullscreenElement;a(l)};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("MSFullscreenChange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("mozfullscreenchange",s),document.removeEventListener("MSFullscreenChange",s)}},[]);const c=i.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(s){console.error("全屏切换失败:",s)}},[]);return{isFullscreen:o,toggleFullscreen:c}},se=({adSlot:o,adFormat:a="auto",adStyle:c={display:"block"},className:s=""})=>(_.useEffect(()=>{const l=document.createElement("script");l.async=!0,l.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID",l.crossOrigin="anonymous",document.querySelector('script[src*="googlesyndication.com"]')||document.head.appendChild(l);try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch{}},[]),e.jsx("div",{className:`ad-banner ${s}`,children:e.jsx("ins",{className:"adsbygoogle",style:c,"data-ad-client":"ca-pub-YOUR_PUBLISHER_ID","data-ad-slot":o,"data-ad-format":a,"data-full-width-responsive":"true"})})),re=({game:o,isOpen:a,onClose:c,isLoading:s=!1,onLoadComplete:l})=>{const{isFullscreen:x,toggleFullscreen:h}=ee(),[g,t]=i.useState(!0);return i.useEffect(()=>{const n=r=>{r.key==="Escape"&&a&&c()};if(a)return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[a,c]),i.useEffect(()=>{if(a&&o){t(!0);const n=setTimeout(()=>{t(!1),l==null||l()},2e3);return()=>clearTimeout(n)}},[a,o,l]),!a||!o?null:e.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col animate-in fade-in duration-300",onClick:c,children:[e.jsx("div",{className:"flex-shrink-0 z-10",onClick:n=>n.stopPropagation(),children:e.jsx("div",{className:"bg-gradient-to-b from-black/90 to-transparent p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white drop-shadow-lg",children:o.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:h,className:"p-3 bg-black/50 hover:bg-black/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-white/40",title:x?"退出全屏":"全屏",children:x?"⤓":"⤢"}),e.jsx("button",{onClick:c,className:"p-3 bg-black/50 hover:bg-red-600/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-red-400/60",title:"关闭游戏",children:e.jsx(A,{size:20})})]})]})})}),e.jsxs("div",{className:"flex-1 relative",onClick:n=>n.stopPropagation(),children:[(s||g)&&e.jsx("div",{className:"absolute top-4 right-4 z-30",children:e.jsx(se,{adSlot:"0987654321",adFormat:"rectangle",className:"w-48 h-32 bg-gray-800 rounded-lg"})}),e.jsxs("div",{className:"w-full h-full bg-black relative overflow-hidden",children:[(s||g)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",children:e.jsx(I,{text:"正在加载游戏..."})}),e.jsxs("div",{className:"w-full h-full relative game-iframe-container",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .game-iframe-container iframe {
                  width: 100% !important;
                  height: 100% !important;
                  border: none !important;
                  outline: none !important;
                  position: relative;
                  z-index: 1;
                }
                
                .game-iframe-container iframe {
                  filter: contrast(1.05) brightness(1.02) saturate(1.1);
                  transform: scale(1.01);
                  transform-origin: center;
                }
                
                .game-iframe-container::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  right: 0;
                  height: 80px;
                  background: linear-gradient(to bottom, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
                
                .game-iframe-container::after {
                  content: '';
                  position: absolute;
                  bottom: 0;
                  left: 0;
                  right: 0;
                  height: 100px;
                  background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
              `}}),e.jsx("div",{className:"w-full h-full relative",dangerouslySetInnerHTML:{__html:o.iframe}})]})]})]})]})},oe=({hotGames:o,newGames:a,className:c=""})=>{const{currentTheme:s}=R(),{t:l}=M(),x=P(),h=t=>{try{return new Date(t).toLocaleDateString("zh-CN")}catch{return"最近"}},g=t=>{x(`/games/${t}`)};return e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{className:"rounded-lg p-3 shadow-lg",style:{backgroundColor:s.colors.surface,borderRadius:s.borderRadius.xl,boxShadow:s.shadows.lg},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($,{size:16,style:{color:s.colors.secondary}}),e.jsx("h3",{className:"font-semibold text-sm",style:{color:s.colors.text},children:"热门游戏"})]}),e.jsx("div",{className:"space-y-2",children:o.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg cursor-pointer transition-colors",style:{backgroundColor:"transparent"},onClick:()=>g(t.id),onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:s.colors.secondary,color:s.colors.text},children:n+1}),e.jsx("img",{src:t.image,alt:t.title,className:"w-8 h-8 rounded object-cover",onError:r=>{r.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs truncate",style:{color:s.colors.text},children:t.title}),e.jsx("div",{className:"text-xs",style:{color:s.colors.textSecondary},children:t.category})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",style:{color:s.colors.accent},children:[e.jsx(L,{size:10}),((t.likes||0)/1e3).toFixed(1),"k"]})]},t.id))})]}),e.jsxs("div",{className:"rounded-lg p-3 shadow-lg",style:{backgroundColor:s.colors.surface,borderRadius:s.borderRadius.xl,boxShadow:s.shadows.lg},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(B,{size:16,style:{color:s.colors.secondary}}),e.jsx("h3",{className:"font-semibold text-sm",style:{color:s.colors.text},children:l("gameHub.latestGames")})]}),e.jsx("div",{className:"space-y-2",children:a.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg cursor-pointer transition-colors",style:{backgroundColor:"transparent"},onClick:()=>g(t.id),onMouseEnter:r=>{r.currentTarget.style.backgroundColor=s.colors.hover},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:s.colors.secondary,color:s.colors.text},children:n+1}),e.jsx("img",{src:t.image,alt:t.title,className:"w-8 h-8 rounded object-cover",onError:r=>{r.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs truncate",style:{color:s.colors.text},children:t.title}),e.jsx("div",{className:"text-xs",style:{color:s.colors.textSecondary},children:t.category})]}),e.jsx("div",{className:"text-xs",style:{color:s.colors.textSecondary},children:t.addedAt?h(t.addedAt):"最近"})]},t.id))})]})]})},te=()=>{const[o,a]=i.useState(null),[c,s]=i.useState(!1),[l,x]=i.useState(!1),h=i.useCallback(n=>{a(n),s(!0),x(!0)},[]),g=i.useCallback(()=>{a(null),s(!1),x(!1)},[]),t=i.useCallback(()=>{x(!1)},[]);return{selectedGame:o,isModalOpen:c,isGameLoading:l,openGame:h,closeGame:g,handleLoadComplete:t}};function ue(){const{games:o,filteredGames:a,isLoading:c,error:s,selectedCategory:l}=Y(),{toggleFavorite:x,setCategory:h}=K(),{selectedGame:g,isModalOpen:t,isGameLoading:n,openGame:r,closeGame:f,handleLoadComplete:p}=te(),{currentTheme:v}=R(),{t:y}=M(),[S,j]=i.useState([]),[w,d]=i.useState([]);i.useEffect(()=>{const b=o.map(N=>({...N,category:N.category||"未分类",thumbnail:N.image||"/car-racing.webp"})),C=[...b].sort((N,H)=>H.likes-N.likes).slice(0,10);j(C);const E=[...b].sort(()=>Math.random()-.5).slice(0,10);d(E)},[o]);const k=b=>{const C=a.find(E=>E.id===b);C&&r(C)},u=b=>{x(b)},m=l,G=i.useCallback(b=>{b!==m&&h(b)},[m,h]);return e.jsxs("div",{className:"min-h-screen text-white",style:{backgroundColor:v.colors.background},children:[e.jsx("div",{className:"pt-16"}),e.jsx(W,{title:`${y("home.title")} - ${y("home.subtitle")} | Iknowwhatyoufuture`,description:y("home.welcomeMessage"),keywords:"热门游戏,在线游戏,免费游戏,游戏中心,动作游戏,冒险游戏,益智游戏,休闲游戏,无忧无虑",canonical:"https://streetracer.online/"}),e.jsxs("div",{className:"container mx-auto px-4 py-4 pt-20",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:v.colors.secondary},children:y("home.title")}),e.jsx("p",{className:"text-sm",style:{color:v.colors.textSecondary},children:y("home.welcomeMessage")})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-start",children:[e.jsx("div",{className:"col-span-12 lg:col-span-9",children:e.jsx(Z,{games:a,allGames:o,isLoading:c,error:s,onPlay:k,onToggleFavorite:u,onCategoryChange:G,selectedCategory:m})}),e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsx(oe,{hotGames:S,newGames:w})})]})]}),e.jsx(re,{game:g,isOpen:t,onClose:f,isLoading:n,onLoadComplete:p})]})}export{ue as default};
