import{f as w,e as v,l as N,r as n,y as E,j as e,z as L,U as S,A as k,w as A,E as C}from"./index-DjexH7CO.js";const F=()=>{const i=w(),o=v(),{login:p,state:c}=N(),[t,b]=n.useState({username:"",password:""}),[d,g]=n.useState(!1),[u,l]=n.useState(""),[x,f]=n.useState(!1);n.useEffect(()=>{E()},[]),n.useEffect(()=>{var r,s;if(c.isAuthenticated){const a=((s=(r=o.state)==null?void 0:r.from)==null?void 0:s.pathname)||"/";i(a,{replace:!0})}},[c.isAuthenticated,i,o.state]);const h=r=>{const{name:s,value:a}=r.target;b(m=>({...m,[s]:a})),u&&l("")},y=async r=>{var s,a;if(r.preventDefault(),!t.username.trim()||!t.password.trim()){l("请输入用户名和密码");return}f(!0),l("");try{if(await p(t.username.trim(),t.password)){const j=((a=(s=o.state)==null?void 0:s.from)==null?void 0:a.pathname)||"/";i(j,{replace:!0})}else l("用户名或密码错误")}catch{l("登录失败，请重试")}finally{f(!1)}};return c.isLoading?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{children:"加载中..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-600",children:e.jsx(L,{className:"h-6 w-6"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"登录到管理后台"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"请输入您的管理员凭据"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"用户名"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(S,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:h,className:"appearance-none rounded-lg relative block w-full pl-10 pr-3 py-3 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"请输入用户名"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"密码"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(k,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:d?"text":"password",required:!0,value:t.password,onChange:h,className:"appearance-none rounded-lg relative block w-full pl-10 pr-10 py-3 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"请输入密码"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!d),children:d?e.jsx(A,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"}):e.jsx(C,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"})})]})]})]}),u&&e.jsx("div",{className:"bg-red-600/20 border border-red-600 text-red-400 px-4 py-3 rounded-lg text-sm",children:u}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"登录中..."]}):"登录"})})]})]})})};export{F as default};
