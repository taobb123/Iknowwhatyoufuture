import{b as R,u as J,r as o,j as e}from"./index-Du8BMbyU.js";import{g as K,a as O,u as Q,d as U}from"./databaseBoardManager-DAhEahQI.js";import{S as V,a as W,b as Y,c as Z,d as _,e as x,f as u,g as p,h as g,i as ee,j as se,k as te,l as le,m as re,n as oe,o as ne,p as ie,q as ae,r as A,s as S,t as C,u as n,v as y,w as M,x as T,y as w,z as N}from"./StyledManagementPage-63J9W30c.js";import{A as ce}from"./arrow-left-gJmRVtYo.js";import{P as de}from"./plus-BASjHXxA.js";import{C as xe}from"./calendar-DRkchnUS.js";const ye=()=>{const E=R(),{currentTheme:i}=J(),[a,h]=o.useState([]),[z,k]=o.useState(!0),[D,m]=o.useState(!1),[L,f]=o.useState(!1),[B,v]=o.useState(null),[d,b]=o.useState(null),[t,l]=o.useState({name:"",description:"",icon:"ğŸ®",color:"from-blue-600 to-purple-600"});o.useEffect(()=>{P()},[]);const P=async()=>{try{console.log("åŠ è½½æ¿å—æ•°æ®...");const s=await K();console.log("åŠ è½½çš„æ¿å—:",s),h(s),k(!1)}catch(s){console.error("åŠ è½½æ¿å—å¤±è´¥:",s),k(!1)}},F=async()=>{try{console.log("åˆ›å»ºæ¿å—:",t);const s=await O({...t,order:0,isActive:!0});h([...a,s]),m(!1),l({name:"",description:"",icon:"ğŸ®",color:"from-blue-600 to-purple-600"}),console.log("æ¿å—åˆ›å»ºæˆåŠŸ")}catch(s){console.error("åˆ›å»ºæ¿å—å¤±è´¥:",s)}},I=async()=>{if(d)try{console.log("æ›´æ–°æ¿å—:",d.id,t);const s=await Q(d.id,{...t,order:d.order,isActive:d.isActive});s&&(h(a.map(r=>r.id===d.id?s:r)),f(!1),b(null),l({name:"",description:"",icon:"ğŸ®",color:"from-blue-600 to-purple-600"}),j("æ¿å—æ›´æ–°æˆåŠŸï¼","success"),console.log("æ¿å—æ›´æ–°æˆåŠŸ"))}catch(s){console.error("æ›´æ–°æ¿å—å¤±è´¥:",s),j("æ¿å—æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•","error")}},$=async s=>{try{console.log("åˆ é™¤æ¿å—:",s),await U(s)&&(h(a.filter(c=>c.id!==s)),v(null),j("æ¿å—åˆ é™¤æˆåŠŸï¼","success"),console.log("æ¿å—åˆ é™¤æˆåŠŸ"))}catch(r){console.error("åˆ é™¤æ¿å—å¤±è´¥:",r),j("æ¿å—åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•","error")}},H=s=>{b(s),l({name:s.name,description:s.description,icon:s.icon,color:s.color}),f(!0)},X=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j=(s,r)=>{const c=document.createElement("div"),q=r==="success"?i.colors.success:i.colors.error,G=r==="success"?"âœ…":"âŒ";c.innerHTML=`
      <div style="
        position: fixed;
        top: 150px;
        right: 200px;
        background: ${q};
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 10000;
        font-family: system-ui, -apple-system, sans-serif;
        font-size: 14px;
        font-weight: 500;
        animation: slideIn 0.3s ease-out;
        max-width: 300px;
      ">
        ${G} ${s}
      </div>
      <style>
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
      </style>
    `,document.body.appendChild(c),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c)},3e3)};return z?e.jsx("div",{className:"min-h-screen text-white flex items-center justify-center",style:{backgroundColor:i.colors.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:i.colors.textSecondary}}),e.jsx("p",{style:{color:i.colors.text},children:"åŠ è½½ä¸­..."})]})}):e.jsx(V,{children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Z,{onClick:()=>E(-1),children:[e.jsx(ce,{size:16}),"è¿”å›"]}),e.jsx(_,{children:"æ¿å—ç®¡ç†"})]}),e.jsxs(x,{onClick:()=>m(!0),children:[e.jsx(de,{size:16}),"åˆ›å»ºæ¿å—"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(u,{children:[e.jsx(p,{children:a.length}),e.jsx(g,{children:"æ€»æ¿å—æ•°"})]}),e.jsxs(u,{children:[e.jsx(p,{children:a.filter(s=>s.isActive).length}),e.jsx(g,{children:"æ´»è·ƒæ¿å—"})]}),e.jsxs(u,{children:[e.jsx(p,{children:"0"}),e.jsx(g,{children:"æ€»ä¸»é¢˜æ•°"})]}),e.jsxs(u,{children:[e.jsx(p,{children:"0"}),e.jsx(g,{children:"æ€»æ–‡ç« æ•°"})]})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"æ¿å—åˆ—è¡¨"}),a.length===0?e.jsxs(te,{children:[e.jsx(le,{children:"æš‚æ— æ¿å—æ•°æ®"}),e.jsx(x,{onClick:()=>m(!0),children:"åˆ›å»ºç¬¬ä¸€ä¸ªæ¿å—"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs(re,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx(oe,{children:s.name}),e.jsx(ne,{children:s.description}),e.jsxs(ie,{children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xe,{size:12}),X(s.createdAt)]}),e.jsx(ae,{isActive:s.isActive,children:s.isActive?"æ´»è·ƒ":"å·²å…³é—­"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",style:{color:i.colors.textSecondary},children:[s.topicCount," ä¸ªä¸»é¢˜"]}),e.jsx(x,{onClick:()=>H(s),className:"px-3 py-1 text-sm",children:"ç¼–è¾‘"}),e.jsx(A,{onClick:()=>v(s.id),className:"px-3 py-1 text-sm",children:"åˆ é™¤"})]})]},s.id))})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(S,{children:[e.jsx(C,{children:"åˆ›å»ºæ¿å—"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"æ¿å—åç§°"}),e.jsx(y,{value:t.name,onChange:s=>l({...t,name:s.target.value}),placeholder:"è¾“å…¥æ¿å—åç§°"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"æ¿å—æè¿°"}),e.jsx(M,{value:t.description,onChange:s=>l({...t,description:s.target.value}),placeholder:"è¾“å…¥æ¿å—æè¿°",rows:3})]}),e.jsxs("div",{children:[e.jsx(n,{children:"å›¾æ ‡"}),e.jsx(y,{value:t.icon,onChange:s=>l({...t,icon:s.target.value}),placeholder:"é€‰æ‹©å›¾æ ‡"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"é¢œè‰²"}),e.jsxs(T,{value:t.color,onChange:s=>l({...t,color:s.target.value}),children:[e.jsx("option",{value:"from-blue-600 to-purple-600",children:"è“è‰²åˆ°ç´«è‰²"}),e.jsx("option",{value:"from-green-600 to-teal-600",children:"ç»¿è‰²åˆ°é’è‰²"}),e.jsx("option",{value:"from-red-600 to-pink-600",children:"çº¢è‰²åˆ°ç²‰è‰²"}),e.jsx("option",{value:"from-yellow-600 to-orange-600",children:"é»„è‰²åˆ°æ©™è‰²"})]})]})]}),e.jsxs(w,{children:[e.jsx(N,{onClick:()=>m(!1),children:"å–æ¶ˆ"}),e.jsx(x,{onClick:F,children:"åˆ›å»º"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(S,{children:[e.jsx(C,{children:"ç¼–è¾‘æ¿å—"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"æ¿å—åç§°"}),e.jsx(y,{value:t.name,onChange:s=>l({...t,name:s.target.value}),placeholder:"è¾“å…¥æ¿å—åç§°"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"æ¿å—æè¿°"}),e.jsx(M,{value:t.description,onChange:s=>l({...t,description:s.target.value}),placeholder:"è¾“å…¥æ¿å—æè¿°",rows:3})]}),e.jsxs("div",{children:[e.jsx(n,{children:"å›¾æ ‡"}),e.jsx(y,{value:t.icon,onChange:s=>l({...t,icon:s.target.value}),placeholder:"é€‰æ‹©å›¾æ ‡"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"é¢œè‰²"}),e.jsxs(T,{value:t.color,onChange:s=>l({...t,color:s.target.value}),children:[e.jsx("option",{value:"from-blue-600 to-purple-600",children:"è“è‰²åˆ°ç´«è‰²"}),e.jsx("option",{value:"from-green-600 to-teal-600",children:"ç»¿è‰²åˆ°é’è‰²"}),e.jsx("option",{value:"from-red-600 to-pink-600",children:"çº¢è‰²åˆ°ç²‰è‰²"}),e.jsx("option",{value:"from-yellow-600 to-orange-600",children:"é»„è‰²åˆ°æ©™è‰²"})]})]})]}),e.jsxs(w,{children:[e.jsx(N,{onClick:()=>f(!1),children:"å–æ¶ˆ"}),e.jsx(x,{onClick:I,children:"ä¿å­˜"})]})]})}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(S,{children:[e.jsx(C,{children:"ç¡®è®¤åˆ é™¤"}),e.jsx("p",{className:"mb-6",style:{color:i.colors.textSecondary},children:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ¿å—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"}),e.jsxs(w,{children:[e.jsx(N,{onClick:()=>v(null),children:"å–æ¶ˆ"}),e.jsx(A,{onClick:()=>$(B),children:"åˆ é™¤"})]})]})})]})})};export{ye as default};
