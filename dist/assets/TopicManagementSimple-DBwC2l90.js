const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BCw3XfMH.js","assets/index-CVsLNFgh.css"])))=>i.map(i=>d[i]);
import{e as D,r,K as L,M as z,j as e,_ as b}from"./index-BCw3XfMH.js";import{A as P}from"./arrow-left-C4yDye0w.js";import{P as B}from"./plus-B-9IxP9O.js";import{C as I}from"./calendar-B4Glwse2.js";const K=()=>{const v=D(),[n,c]=r.useState([]),[m,N]=r.useState([]),[w,p]=r.useState(!0),[S,d]=r.useState(!1),[j,g]=r.useState(!1),[u,h]=r.useState(null),[i,f]=r.useState(null),[x,y]=r.useState(""),[t,o]=r.useState({name:"",description:"",icon:"ðŸŒŸ",color:"from-yellow-500 to-orange-500"});r.useEffect(()=>{T()},[]);const T=()=>{try{console.log("åŠ è½½ä¸»é¢˜å’Œæ¿å—æ•°æ®...");const s=L();N(s);const l=z();c(l),console.log("åŠ è½½çš„æ•°æ®:",{boards:s.length,topics:l.length}),p(!1)}catch(s){console.error("åŠ è½½æ•°æ®å¤±è´¥:",s),p(!1)}},C=async()=>{if(!x){alert("è¯·é€‰æ‹©æ‰€å±žæ¿å—");return}try{console.log("TopicManagementSimple: åˆ›å»ºä¸»é¢˜:",{...t,boardId:x});const l=(await b(()=>import("./index-BCw3XfMH.js").then(a=>a.a1),__vite__mapDeps([0,1]))).addTopic({...t,boardId:x});c([...n,l]),d(!1),o({name:"",description:"",icon:"ðŸŒŸ",color:"from-yellow-500 to-orange-500"}),y(""),console.log("TopicManagementSimple: ä¸»é¢˜åˆ›å»ºæˆåŠŸ")}catch(s){console.error("TopicManagementSimple: åˆ›å»ºä¸»é¢˜å¤±è´¥:",s)}},k=async()=>{if(i)try{console.log("TopicManagementSimple: æ›´æ–°ä¸»é¢˜:",i.id,t);const l=(await b(()=>import("./index-BCw3XfMH.js").then(a=>a.a1),__vite__mapDeps([0,1]))).updateTopic(i.id,t);c(n.map(a=>a.id===i.id?l:a)),g(!1),f(null),o({name:"",description:"",icon:"ðŸŒŸ",color:"from-yellow-500 to-orange-500"}),console.log("TopicManagementSimple: ä¸»é¢˜æ›´æ–°æˆåŠŸ")}catch(s){console.error("TopicManagementSimple: æ›´æ–°ä¸»é¢˜å¤±è´¥:",s)}},M=async s=>{try{console.log("TopicManagementSimple: åˆ é™¤ä¸»é¢˜:",s),(await b(()=>import("./index-BCw3XfMH.js").then(a=>a.a1),__vite__mapDeps([0,1]))).deleteTopic(s),c(n.filter(a=>a.id!==s)),h(null),console.log("TopicManagementSimple: ä¸»é¢˜åˆ é™¤æˆåŠŸ")}catch(l){console.error("TopicManagementSimple: åˆ é™¤ä¸»é¢˜å¤±è´¥:",l)}},_=s=>{console.log("TopicManagementSimple: æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†:",s),f(s),o({name:s.name||"",description:s.description||"",icon:s.icon||"ðŸŒŸ",color:s.color||"from-yellow-500 to-orange-500"}),g(!0)},A=s=>{const l=m.find(a=>a.id===s);return l?l.name:"æœªçŸ¥æ¿å—"},E=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return w?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"åŠ è½½ä¸­..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>v(-1),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(P,{size:16}),"è¿”å›ž"]}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"ä¸»é¢˜ç®¡ç†ï¼ˆç®€åŒ–ç‰ˆï¼‰"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(B,{size:16}),"åˆ›å»ºä¸»é¢˜"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer text-blue-400 hover:text-blue-300 font-medium",children:"ðŸ”§ è°ƒè¯•ä¿¡æ¯ (ç‚¹å‡»å±•å¼€)"}),e.jsxs("div",{className:"mt-3 space-y-1 text-gray-300",children:[e.jsxs("p",{children:["ç¼–è¾‘æ¨¡æ€æ¡†: ",j?"æ˜¾ç¤º":"éšè—"]}),e.jsxs("p",{children:["åˆ é™¤ç¡®è®¤: ",u?"æ˜¾ç¤º":"éšè—"]}),e.jsxs("p",{children:["æ­£åœ¨ç¼–è¾‘: ",(i==null?void 0:i.name)||"æ— "]}),e.jsxs("p",{children:["ä¸»é¢˜æ•°é‡: ",n.length]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.length}),e.jsx("div",{className:"text-gray-400",children:"æ€»ä¸»é¢˜æ•°"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.filter(s=>s.isActive).length}),e.jsx("div",{className:"text-gray-400",children:"æ´»è·ƒä¸»é¢˜"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:m.length}),e.jsx("div",{className:"text-gray-400",children:"æ€»æ¿å—æ•°"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"0"}),e.jsx("div",{className:"text-gray-400",children:"æ€»æ–‡ç« æ•°"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"ä¸»é¢˜åˆ—è¡¨"}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"æš‚æ— ä¸»é¢˜æ•°æ®"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"åˆ›å»ºç¬¬ä¸€ä¸ªä¸»é¢˜"})]}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{size:12}),E(s.createdAt)]}),e.jsxs("span",{className:"text-gray-400",children:["æ‰€å±žæ¿å—: ",A(s.boardId)]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.isActive?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:s.isActive?"æ´»è·ƒ":"å·²å…³é—­"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[s.articleCount," ç¯‡æ–‡ç« "]}),e.jsx("button",{onClick:()=>{console.log("TopicManagementSimple: ç‚¹å‡»ç¼–è¾‘æŒ‰é’®",s),_(s)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"ç¼–è¾‘"}),e.jsx("button",{onClick:()=>{console.log("TopicManagementSimple: ç‚¹å‡»åˆ é™¤æŒ‰é’®",s.id),h(s.id)},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors",children:"åˆ é™¤"})]})]},s.id))})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"åˆ›å»ºä¸»é¢˜"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"æ‰€å±žæ¿å—"}),e.jsxs("select",{value:x,onChange:s=>y(s.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"é€‰æ‹©æ¿å—"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ä¸»é¢˜åç§°"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o({...t,name:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"è¾“å…¥ä¸»é¢˜åç§°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ä¸»é¢˜æè¿°"}),e.jsx("textarea",{value:t.description,onChange:s=>o({...t,description:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",rows:3,placeholder:"è¾“å…¥ä¸»é¢˜æè¿°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"å›¾æ ‡"}),e.jsx("input",{type:"text",value:t.icon,onChange:s=>o({...t,icon:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"é€‰æ‹©å›¾æ ‡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"é¢œè‰²"}),e.jsxs("select",{value:t.color,onChange:s=>o({...t,color:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"from-yellow-500 to-orange-500",children:"é»„è‰²åˆ°æ©™è‰²"}),e.jsx("option",{value:"from-purple-500 to-pink-500",children:"ç´«è‰²åˆ°ç²‰è‰²"}),e.jsx("option",{value:"from-indigo-500 to-blue-500",children:"é›è“åˆ°è“è‰²"}),e.jsx("option",{value:"from-green-500 to-teal-500",children:"ç»¿è‰²åˆ°é’è‰²"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"åˆ›å»º"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ç¼–è¾‘ä¸»é¢˜"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ä¸»é¢˜åç§°"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o({...t,name:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"è¾“å…¥ä¸»é¢˜åç§°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ä¸»é¢˜æè¿°"}),e.jsx("textarea",{value:t.description,onChange:s=>o({...t,description:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",rows:3,placeholder:"è¾“å…¥ä¸»é¢˜æè¿°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"å›¾æ ‡"}),e.jsx("input",{type:"text",value:t.icon,onChange:s=>o({...t,icon:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"é€‰æ‹©å›¾æ ‡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"é¢œè‰²"}),e.jsxs("select",{value:t.color,onChange:s=>o({...t,color:s.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"from-yellow-500 to-orange-500",children:"é»„è‰²åˆ°æ©™è‰²"}),e.jsx("option",{value:"from-purple-500 to-pink-500",children:"ç´«è‰²åˆ°ç²‰è‰²"}),e.jsx("option",{value:"from-indigo-500 to-blue-500",children:"é›è“åˆ°è“è‰²"}),e.jsx("option",{value:"from-green-500 to-teal-500",children:"ç»¿è‰²åˆ°é’è‰²"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>{console.log("TopicManagementSimple: ä¿å­˜æŒ‰é’®è¢«ç‚¹å‡»"),k()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"ä¿å­˜"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ç¡®è®¤åˆ é™¤"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»é¢˜å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>M(u),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"åˆ é™¤"})]})]})})]})})};export{K as default};
