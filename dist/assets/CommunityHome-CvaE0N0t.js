import{r as l,K as g,M as b,o as j,O as p,P as r,j as e,Q as n}from"./index-BCw3XfMH.js";const T=()=>{const[o,d]=l.useState([]),[x,m]=l.useState([]),[c,h]=l.useState([]),[N,i]=l.useState(!0);l.useEffect(()=>{u()},[]);const u=()=>{try{console.log("开始加载社区数据...");const s=g(),t=b(),a=j().slice(0,5);if(console.log("加载的数据:",{boards:s.length,topics:t.length,articles:a.length}),s.length===0||t.length===0){console.log("数据不存在，创建测试数据..."),f();return}d(s),m(t),h(a),i(!1)}catch(s){console.error("加载数据失败:",s),i(!1)}},f=()=>{try{console.log("创建测试数据...");const s=p({name:"游戏攻略",description:"分享各种游戏的攻略和技巧",icon:"🎮",color:"from-blue-600 to-purple-600"}),t=p({name:"技术讨论",description:"前端开发和技术交流",icon:"💻",color:"from-green-600 to-teal-600"}),a=r({name:"新手入门",description:"适合新手的游戏攻略",boardId:s.id,icon:"🌟",color:"from-yellow-500 to-orange-500"}),L=r({name:"高级技巧",description:"高级玩家分享的技巧",boardId:s.id,icon:"⚡",color:"from-purple-500 to-pink-500"}),A=r({name:"前端开发",description:"前端技术讨论",boardId:t.id,icon:"🎨",color:"from-indigo-500 to-blue-500"});console.log("测试数据创建完成");const v=g(),y=b(),w=j().slice(0,5);d(v),m(y),h(w),i(!1)}catch(s){console.error("创建测试数据失败:",s),i(!1)}};return N?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"加载中..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"游戏社区"}),e.jsx("p",{className:"text-xl text-blue-100 mb-6",children:"分享游戏攻略，交流技术心得，发现更多精彩内容"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:o.length}),e.jsx("div",{className:"text-blue-100",children:"板块"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.length}),e.jsx("div",{className:"text-blue-100",children:"主题"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.length}),e.jsx("div",{className:"text-blue-100",children:"文章"})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"热门板块"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-3xl mr-3",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:s.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[s.topicCount," 个主题"]})]})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:s.description}),e.jsx(n,{to:`/board/${s.id}`,className:"inline-flex items-center text-blue-400 hover:text-blue-300",children:"进入板块 →"})]},s.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"热门主题"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:s.icon}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:s.description}),e.jsx(n,{to:`/topic/${s.id}`,className:"text-blue-400 hover:text-blue-300 text-sm",children:"查看主题 →"})]},s.id))})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"最新文章"}),e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:s.title}),e.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:[s.content.substring(0,100),"..."]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-500 text-sm",children:["作者: ",s.author]}),e.jsx(n,{to:`/article/${s.id}`,className:"text-blue-400 hover:text-blue-300 text-sm",children:"阅读全文 →"})]})]},s.id))})]})]})})};export{T as default};
