import{c as P,u as ge,a as ue,r as c,j as e,U as V,b as pe,d as Se,C as se,E as le,H as oe,S as ce,e as Ae,G as ye,P as Me,g as ne,f as Te,h as ze,i as $e}from"./index-CNCBtjWD.js";import{i as Le,g as Ee}from"./databaseArticleManager-Bbj-PtHr.js";import{M as ie}from"./MarkdownRenderer-haf3YIWZ.js";import{T as de}from"./trending-up-hnCEj-hB.js";import{P as fe}from"./plus-BrRwgUZk.js";import{A as xe}from"./arrow-left-C5wMY0UL.js";import{S as me}from"./share-2-PufxX0Ms.js";import{C as Ie}from"./code-B7J-F_8J.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=P("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=P("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=P("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=P("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=P("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Be=[{id:"全部",name:"全部",icon:pe,color:"from-blue-600 to-purple-600",hoverColor:"hover:from-blue-600/50"},{id:"前端开发",name:"前端开发",icon:Ie,color:"from-green-600 to-teal-600",hoverColor:"hover:from-green-600/50"},{id:"后端开发",name:"后端开发",icon:De,color:"from-orange-600 to-red-600",hoverColor:"hover:from-orange-600/50"},{id:"游戏设计",name:"游戏设计",icon:Me,color:"from-purple-600 to-pink-600",hoverColor:"hover:from-purple-600/50"},{id:"AI/ML",name:"AI/ML",icon:Pe,color:"from-indigo-600 to-blue-600",hoverColor:"hover:from-indigo-600/50"},{id:"工具使用",name:"工具使用",icon:qe,color:"from-gray-600 to-slate-600",hoverColor:"hover:from-gray-600/50"},{id:"王者荣耀",name:"王者荣耀",icon:ye,color:"from-red-600 to-orange-600",hoverColor:"hover:from-red-600/50"}],Ge=({searchQuery:S,onSearchChange:R,sortBy:u,onSortChange:D,selectedCategory:j,onCategoryChange:q,guides:b,filteredGuides:g,paginatedGuides:L,currentPage:m,totalPages:p,guidesPerPage:E,onPageChange:A,onPrevPage:I,onNextPage:Q,hotGames:U,newGames:F,userInfo:M,onPublishClick:y,className:B=""})=>{var re,ae;const{currentTheme:t}=ge(),{t:f}=ue(),[v,z]=c.useState(null),[G,$]=c.useState(!1),[N,W]=c.useState(!1),[Z,T]=c.useState(0),[X,o]=c.useState(0),[l,n]=c.useState(!1),[H,h]=c.useState({}),w=c.useRef(null),i=v?b.find(s=>s.id===v):null,_=(s=100)=>{setTimeout(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth",block:"start"})},s)},be=s=>{const r=b.find(a=>a.id===s);if(!r){h(a=>({...a,[s]:"文章不存在或正在加载中"})),console.warn(`文章不存在: ${s}`),setTimeout(()=>{h(a=>{const d={...a};return delete d[s],d})},3e3);return}h(a=>{const d={...a};return delete d[s],d}),z(s),$(!0),T(r.likes),o(r.views),_(100)},je=()=>{$(!1),z(null)},J=()=>{if(!v)return null;const s=g.findIndex(r=>(r.articleId||r.id.toString())===v);return s>0?g[s-1]:null},K=()=>{if(!v)return null;const s=g.findIndex(r=>(r.articleId||r.id.toString())===v);return s<g.length-1?g[s+1]:null},k=()=>J()!==null,C=()=>K()!==null,ve=()=>{if(!k()||l)return;const s=J();if(s){const r=s.articleId||s.id.toString();if(!ne(r)){console.warn(`上一篇文章不存在: ${r}`);return}n(!0),z(r),$(!0),T(Math.floor(Math.random()*1e3)+100),o(Math.floor(Math.random()*5e3)+500),_(150),setTimeout(()=>n(!1),300)}},Ne=()=>{if(!C()||l)return;const s=K();if(s){const r=s.articleId||s.id.toString();if(!ne(r)){console.warn(`下一篇文章不存在: ${r}`);return}n(!0),z(r),$(!0),T(Math.floor(Math.random()*1e3)+100),o(Math.floor(Math.random()*5e3)+500),_(150),setTimeout(()=>n(!1),300)}},we=()=>{W(!N),T(s=>N?s-1:s+1)},te=()=>{if(navigator.share)navigator.share({title:i==null?void 0:i.title,text:(i==null?void 0:i.content.substring(0,100))+"...",url:window.location.href});else{navigator.clipboard.writeText(window.location.href);const s=document.createElement("div");s.innerHTML=`
        <div style="
          position: fixed;
          top: 20px;
          right: 20px;
          background: #10B981;
          color: white;
          padding: 16px 24px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          z-index: 10000;
          font-family: system-ui, -apple-system, sans-serif;
          font-size: 14px;
          font-weight: 500;
          animation: slideIn 0.3s ease-out;
        ">
          ✅ 链接已复制到剪贴板
        </div>
        <style>
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
        </style>
      `,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},3e3)}},ke=Be.map(s=>({...s,count:s.id==="全部"?b.length:b.filter(r=>r.category===s.id).length})),Ce=(s,r)=>{const a=[];if(s<=5)for(let x=1;x<=s;x++)a.push(x);else{const x=Math.max(1,r-2),Y=Math.min(s,x+5-1);x>1&&(a.push(1),x>2&&a.push("..."));for(let ee=x;ee<=Y;ee++)a.push(ee);Y<s&&(Y<s-1&&a.push("..."),a.push(s))}return a},O=s=>{const r=new Date(s),d=Math.abs(new Date().getTime()-r.getTime()),x=Math.ceil(d/(1e3*60*60*24));return x===1?"昨天":x<7?`${x}天前`:x<30?`${Math.ceil(x/7)}周前`:r.toLocaleDateString("zh-CN")};return e.jsxs("div",{className:`max-w-7xl mx-auto grid grid-cols-12 gap-4 p-4 w-full ${B}`,children:[e.jsx("div",{className:"col-span-9 rounded-xl p-4 shadow-2xl",style:{background:`linear-gradient(to bottom right, ${t.colors.surface}, ${t.colors.background})`,boxShadow:t.shadows.xl},children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 h-full",children:[e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsxs("div",{className:"rounded-lg p-3 backdrop-blur-sm",style:{backgroundColor:`${t.colors.surface}80`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:t.colors.primary},children:e.jsx(V,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:t.colors.text},children:M.name}),e.jsx("p",{className:"text-xs",style:{color:t.colors.textSecondary},children:M.level})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:t.colors.text},children:M.guides}),e.jsx("div",{style:{color:t.colors.textSecondary},children:"攻略"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:t.colors.text},children:M.likes}),e.jsx("div",{style:{color:t.colors.textSecondary},children:"点赞"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:t.colors.text},children:M.collections}),e.jsx("div",{style:{color:t.colors.textSecondary},children:"收藏"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"text-xs font-semibold mb-2 flex items-center",style:{color:t.colors.textSecondary},children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),"攻略分类"]}),ke.map(s=>{const r=s.icon,a=j===s.id;return e.jsx("button",{onClick:()=>q(s.id),className:"w-full text-left px-2 py-2 rounded-lg transition-all duration-200 transform hover:scale-102 hover:shadow-md",style:{backgroundColor:a?t.colors.primary:`${t.colors.surface}80`,color:a?t.colors.text:t.colors.textSecondary,boxShadow:a?t.shadows.md:"none",borderColor:a?t.colors.border:"transparent",border:"1px solid"},onMouseEnter:d=>{a||(d.currentTarget.style.backgroundColor=t.colors.hover,d.currentTarget.style.color=t.colors.text)},onMouseLeave:d=>{a||(d.currentTarget.style.backgroundColor=`${t.colors.surface}80`,d.currentTarget.style.color=t.colors.textSecondary)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{size:14}),e.jsx("span",{className:"font-medium text-sm",children:s.name})]}),e.jsx("span",{className:"text-xs rounded-full px-1.5 py-0.5",style:{backgroundColor:`${t.colors.textSecondary}20`,color:t.colors.textSecondary},children:s.count})]})},s.id)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"text-xs font-semibold mb-2 flex items-center",style:{color:t.colors.textSecondary},children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),"热门话题"]}),e.jsx("div",{className:"space-y-1",children:["React游戏开发","TypeScript技巧","Vue组件设计","Node.js服务器"].map(s=>e.jsxs("div",{className:"text-xs cursor-pointer rounded px-2 py-1 transition-colors",style:{color:t.colors.textSecondary,backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t.colors.text,r.currentTarget.style.backgroundColor=t.colors.hover},onMouseLeave:r=>{r.currentTarget.style.color=t.colors.textSecondary,r.currentTarget.style.backgroundColor="transparent"},children:["#",s]},s))})]})]}),e.jsxs("div",{className:"col-span-9 flex flex-col",children:[e.jsxs("div",{className:"rounded-lg p-3 mb-4 backdrop-blur-sm",style:{backgroundColor:`${t.colors.surface}80`},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Se,{className:"absolute left-2 top-1/2 transform -translate-y-1/2",size:16,style:{color:t.colors.textSecondary}}),e.jsx("input",{type:"text",placeholder:"搜索攻略、游戏、作者...",value:S,onChange:s=>R(s.target.value),className:"w-full pl-8 pr-3 py-1.5 rounded-lg text-white focus:outline-none text-sm",style:{backgroundColor:`${t.colors.background}80`,borderColor:t.colors.border,border:"1px solid",color:t.colors.text}})]}),e.jsxs("select",{value:u,onChange:s=>D(s.target.value),className:"px-3 py-1.5 rounded-lg text-white focus:outline-none text-sm",style:{backgroundColor:`${t.colors.background}80`,borderColor:t.colors.border,border:"1px solid",color:t.colors.text},children:[e.jsx("option",{value:"最新",children:f("gameHub.sortLatest")}),e.jsx("option",{value:"热门",children:f("gameHub.sortPopular")}),e.jsx("option",{value:"最多点赞",children:f("gameHub.sortMostLiked")}),e.jsx("option",{value:"最多评论",children:f("gameHub.sortMostCommented")})]}),y&&e.jsxs("button",{onClick:y,className:"px-3 py-1.5 rounded-lg flex items-center gap-1 transition-colors text-sm",style:{backgroundColor:t.colors.primary},onMouseEnter:s=>{s.currentTarget.style.backgroundColor=t.colors.hover},onMouseLeave:s=>{s.currentTarget.style.backgroundColor=t.colors.primary},children:[e.jsx(fe,{size:16}),f("gameHub.publish")]})]}),e.jsx("div",{className:"text-xs",style:{color:t.colors.textSecondary},children:f("gameHub.foundGuidesInfo",{count:g.length,currentPage:m,totalPages:p})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[G&&i?e.jsxs("div",{className:"bg-gray-800/50 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gray-700/50 border-b border-gray-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:je,className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(xe,{size:20}),"返回列表"]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:te,className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(me,{size:18}),"分享"]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-full",children:i.category}),e.jsx("span",{className:"text-gray-400 text-sm",children:"•"}),e.jsx("span",{className:"text-gray-400 text-sm",children:O(i.createdAt)})]}),e.jsx("h1",{className:"text-3xl font-bold mb-4 leading-tight text-white",children:i.title}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{size:16}),e.jsx("span",{children:i.authorType==="guest"?"游客":i.author})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:16}),e.jsxs("span",{children:[Math.ceil(i.content.length/500)," 分钟阅读"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16}),e.jsxs("span",{children:[X," 次浏览"]})]})]})]}),e.jsx("article",{className:"max-w-none",children:e.jsx("div",{ref:w,className:"article-content",children:e.jsx(ie,{content:i.content})})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:we,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${N?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(oe,{size:18,className:N?"fill-current":""}),e.jsx("span",{children:Z})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-300 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(he,{size:18}),e.jsx("span",{children:"评论"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-300 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(ce,{size:18}),e.jsx("span",{children:"收藏"})]})]}),e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors",children:[e.jsx(me,{size:18}),e.jsx("span",{children:"分享文章"})]})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ae,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"标签："})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((s,r)=>e.jsx("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 text-sm rounded-full hover:bg-gray-600 transition-colors cursor-pointer",children:s},r))})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("button",{onClick:ve,disabled:!k()||l,className:`flex items-center gap-3 p-4 rounded-lg transition-all duration-300 w-full ${!k()||l?"bg-gray-600/30 cursor-not-allowed opacity-50":"bg-gray-700/50 hover:bg-gray-600/50 hover:scale-105"}`,children:[e.jsx(xe,{size:20,className:`${!k()||l?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`text-sm mb-1 ${!k()||l?"text-gray-500":"text-gray-400"}`,children:l?"切换中...":k()?"上一篇":"已是第一篇"}),e.jsx("div",{className:`font-medium line-clamp-2 ${!k()||l?"text-gray-500":"text-white"}`,children:k()?(re=J())==null?void 0:re.title:"没有更多文章"})]})]})}),e.jsx("div",{className:"flex-1 ml-4",children:e.jsxs("button",{onClick:Ne,disabled:!C()||l,className:`flex items-center gap-3 p-4 rounded-lg transition-all duration-300 w-full ${!C()||l?"bg-gray-600/30 cursor-not-allowed opacity-50":"bg-gray-700/50 hover:bg-gray-600/50 hover:scale-105"}`,children:[e.jsxs("div",{className:"text-right flex-1",children:[e.jsx("div",{className:`text-sm mb-1 ${!C()||l?"text-gray-500":"text-gray-400"}`,children:l?"切换中...":C()?"下一篇":"已是最后一篇"}),e.jsx("div",{className:`font-medium line-clamp-2 ${!C()||l?"text-gray-500":"text-white"}`,children:C()?(ae=K())==null?void 0:ae.title:"没有更多文章"})]}),e.jsx(He,{size:20,className:`${!C()||l?"text-gray-500":"text-gray-400"}`})]})})]})})]})]}):e.jsx(e.Fragment,{children:L.map(s=>{const r=s.id,a=H[r];return e.jsx("div",{className:`rounded-lg p-3 transition-colors backdrop-blur-sm ${a?"bg-red-900/20 border border-red-500/50":"bg-gray-700/50 hover:bg-gray-600/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${a?"bg-red-600/50":"bg-gray-600/50"}`,children:e.jsx(ye,{size:18,className:a?"text-red-400":"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`text-base font-semibold cursor-pointer transition-colors ${a?"text-red-300 hover:text-red-200":"text-white hover:text-blue-400"}`,onClick:()=>be(r),children:s.title}),e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded text-white ${a?"bg-red-600":"bg-blue-600"}`,children:s.category})]}),a&&e.jsx("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-2 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-200 text-xs",children:a})]})}),e.jsx("div",{className:`mb-2 line-clamp-2 ${a?"text-red-300/70":"text-gray-400"}`,children:e.jsx(ie,{content:s.content.substring(0,100)+"..."})}),e.jsxs("div",{className:`flex items-center gap-3 text-xs mb-2 ${a?"text-red-400/70":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:12}),s.authorType==="guest"?"游客":s.author]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{size:12}),O(s.createdAt)]}),s.gameTitle&&e.jsx("span",{className:a?"text-red-400":"text-blue-400",children:s.gameTitle})]}),e.jsxs("div",{className:`flex items-center gap-3 text-xs ${a?"text-red-400/70":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{size:12}),s.views," 次浏览"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{size:12}),s.likes," 点赞"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{size:12}),s.comments," 评论"]})]}),e.jsx("div",{className:"flex gap-1 mt-2",children:s.tags.map(d=>e.jsxs("span",{className:`px-1.5 py-0.5 text-xs rounded ${a?"bg-red-600/50 text-red-200":"bg-gray-600/50 text-gray-300"}`,children:["#",d]},d))})]})]})},s.id)})}),!G&&p>1&&e.jsx("div",{className:"bg-gray-700/50 rounded-lg p-6 mt-6 backdrop-blur-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-base text-gray-300 text-center",children:["显示第 ",e.jsx("span",{className:"font-semibold text-white",children:(m-1)*E+1})," - ",e.jsx("span",{className:"font-semibold text-white",children:Math.min(m*E,g.length)})," 条，共 ",e.jsx("span",{className:"font-semibold text-blue-400",children:g.length})," 条记录"]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:I,disabled:m===1,className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 ${m===1?"bg-gray-600/30 text-gray-500 cursor-not-allowed":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:"上一页"}),e.jsx("div",{className:"flex items-center gap-2",children:Ce(p,m).map(s=>e.jsx("button",{onClick:()=>A(Number(s)),className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 min-w-[44px] ${m===s?"bg-blue-600 text-white shadow-lg scale-105":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:s},s))}),e.jsx("button",{onClick:Q,disabled:m===p,className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 ${m===p?"bg-gray-600/30 text-gray-500 cursor-not-allowed":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:"下一页"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4 border-t border-gray-600",children:[e.jsx("span",{className:"text-base text-gray-300",children:"快速跳转："}),e.jsx("select",{value:m,onChange:s=>A(Number(s.target.value)),className:"px-4 py-2 bg-gray-600/50 rounded-lg text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600 hover:bg-gray-500/50 transition-colors",children:Array.from({length:p},(s,r)=>r+1).map(s=>e.jsxs("option",{value:s,children:["第 ",s," 页"]},s))})]})]})})]})]})]})}),e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(de,{size:16,className:"text-red-500"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:"热门游戏"})]}),e.jsx("div",{className:"space-y-2",children:U.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-xs font-bold text-white",children:r+1}),e.jsx("img",{src:s.image,alt:s.title,className:"w-8 h-8 rounded object-cover",onError:a=>{a.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs truncate text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400",children:s.category})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-400",children:[e.jsx(ce,{size:10}),((s.likes||0)/1e3).toFixed(1),"k"]})]},s.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(se,{size:16,className:"text-green-500"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:f("gameHub.latestGames")})]}),e.jsx("div",{className:"space-y-2",children:F.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-xs font-bold text-white",children:r+1}),e.jsx("img",{src:s.image,alt:s.title,className:"w-8 h-8 rounded object-cover",onError:a=>{a.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs truncate text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400",children:s.category})]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.addedAt?O(s.addedAt):"最近"})]},s.id))})]})]})]})},_e=()=>{const S=Te(),R=ze(),{currentTheme:u}=ge(),{t:D}=ue(),[j,q]=c.useState(""),[b,g]=c.useState("全部"),[L,m]=c.useState("最新"),[p,E]=c.useState([]),[A,I]=c.useState([]),[Q,U]=c.useState([]),[F,M]=c.useState([]),[y,B]=c.useState(1),[t]=c.useState(5),[f,v]=c.useState(1),[z,G]=c.useState([]);c.useEffect(()=>{if(S.state){const o=S.state;o.searchQuery&&q(o.searchQuery),o.selectedCategory&&g(o.selectedCategory)}},[S.state]),c.useEffect(()=>{(async()=>{try{await Le(),setTimeout(async()=>{const w=(await Ee()).filter(i=>i.status==="published");E(w),I(w)},100)}catch(h){console.error("加载文章数据失败:",h)}})();const l=$e.map(h=>({...h,category:h.category||"未分类",thumbnail:h.image||"/car-racing.webp"})),n=[...l].sort((h,w)=>w.likes-h.likes).slice(0,10);U(n);const H=[...l].sort(()=>Math.random()-.5).slice(0,10);M(H)},[]),c.useEffect(()=>{let o=p;switch(b!=="全部"&&(o=o.filter(l=>l.category===b)),j.trim()&&(o=o.filter(l=>l.title.toLowerCase().includes(j.toLowerCase())||l.content.toLowerCase().includes(j.toLowerCase())||l.tags.some(n=>n.toLowerCase().includes(j.toLowerCase())))),L){case"最新":o.sort((l,n)=>new Date(n.createdAt).getTime()-new Date(l.createdAt).getTime());break;case"热门":o.sort((l,n)=>n.likes-l.likes);break;case"最多浏览":o.sort((l,n)=>n.views-l.views);break;case"最多评论":o.sort((l,n)=>n.comments-l.comments);break}I(o),B(1)},[p,b,j,L]),c.useEffect(()=>{const o=Math.ceil(A.length/t);v(o);const l=(y-1)*t,n=l+t,H=A.slice(l,n);G(H)},[A,y,t]);const $={name:"游戏玩家",level:"Lv.5 攻略达人",guides:12,likes:156,collections:23},N=o=>{B(o),window.scrollTo({top:0,behavior:"smooth"})},W=()=>{y>1&&N(y-1)},Z=()=>{y<f&&N(y+1)},T=()=>{R("/article-editor")},X=()=>{const o=getPublishedArticles();E(o),I(o)};return c.useEffect(()=>{S.pathname==="/game-hub"&&setTimeout(()=>{X()},100)},[S.pathname]),e.jsxs("div",{className:"min-h-screen text-white flex flex-col",style:{backgroundColor:u.colors.background},children:[e.jsx("div",{className:"pt-16"}),e.jsx("div",{className:"p-2 border-b",style:{backgroundColor:u.colors.surface,borderColor:u.colors.border},children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-2",children:[e.jsxs("h1",{className:"text-lg sm:text-xl font-bold",style:{color:u.colors.text},children:["🎮 ",D("gameHub.title")]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:T,className:"px-3 py-1.5 rounded-lg flex items-center gap-1 transition-colors text-sm",style:{backgroundColor:u.colors.primary},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=u.colors.hover},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=u.colors.primary},children:[e.jsx(fe,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:D("articleEditor.createArticle")})]}),e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{backgroundColor:u.colors.secondary},children:e.jsx(V,{size:16})})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(Ge,{searchQuery:j,onSearchChange:q,sortBy:L,onSortChange:m,selectedCategory:b,onCategoryChange:g,guides:p,filteredGuides:A,paginatedGuides:z,currentPage:y,totalPages:f,guidesPerPage:t,onPageChange:N,onPrevPage:W,onNextPage:Z,hotGames:Q,newGames:F,userInfo:$,onPublishClick:T})})]})};export{_e as default};
