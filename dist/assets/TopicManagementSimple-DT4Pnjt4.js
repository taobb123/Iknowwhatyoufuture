const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DjexH7CO.js","assets/index-lof3qa6K.css"])))=>i.map(i=>d[i]);
import{f as M,r as o,Y as L,Z as z,j as e,_ as b}from"./index-DjexH7CO.js";import{A as P}from"./arrow-left-U28xwuki.js";import{P as B}from"./plus-CsLKypcW.js";import{C as I}from"./calendar-DcrdUgBW.js";const Y=()=>{const v=M(),[n,d]=o.useState([]),[x,N]=o.useState([]),[w,p]=o.useState(!0),[C,c]=o.useState(!1),[j,m]=o.useState(!1),[u,g]=o.useState(null),[i,f]=o.useState(null),[h,y]=o.useState(""),[s,r]=o.useState({name:"",description:"",icon:"🌟",color:"from-yellow-500 to-orange-500"});o.useEffect(()=>{k()},[]);const k=()=>{try{const t=L();N(t);const a=z();d(a),p(!1)}catch(t){console.error("加载数据失败:",t),p(!1)}},S=async()=>{if(!h){alert("请选择所属板块");return}try{const a=(await b(()=>import("./index-DjexH7CO.js").then(l=>l.a4),__vite__mapDeps([0,1]))).addTopic({...s,boardId:h});d([...n,a]),c(!1),r({name:"",description:"",icon:"🌟",color:"from-yellow-500 to-orange-500"}),y("")}catch(t){console.error("TopicManagementSimple: 创建主题失败:",t)}},_=async()=>{if(i)try{const a=(await b(()=>import("./index-DjexH7CO.js").then(l=>l.a4),__vite__mapDeps([0,1]))).updateTopic(i.id,s);d(n.map(l=>l.id===i.id?a:l)),m(!1),f(null),r({name:"",description:"",icon:"🌟",color:"from-yellow-500 to-orange-500"})}catch(t){console.error("TopicManagementSimple: 更新主题失败:",t)}},T=async t=>{try{(await b(()=>import("./index-DjexH7CO.js").then(l=>l.a4),__vite__mapDeps([0,1]))).deleteTopic(t),d(n.filter(l=>l.id!==t)),g(null)}catch(a){console.error("TopicManagementSimple: 删除主题失败:",a)}},A=t=>{f(t),r({name:t.name||"",description:t.description||"",icon:t.icon||"🌟",color:t.color||"from-yellow-500 to-orange-500"}),m(!0)},E=t=>{const a=x.find(l=>l.id===t);return a?a.name:"未知板块"},D=t=>new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return w?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"加载中..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>v(-1),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(P,{size:16}),"返回"]}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"主题管理（简化版）"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(B,{size:16}),"创建主题"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer text-blue-400 hover:text-blue-300 font-medium",children:"🔧 调试信息 (点击展开)"}),e.jsxs("div",{className:"mt-3 space-y-1 text-gray-300",children:[e.jsxs("p",{children:["编辑模态框: ",j?"显示":"隐藏"]}),e.jsxs("p",{children:["删除确认: ",u?"显示":"隐藏"]}),e.jsxs("p",{children:["正在编辑: ",(i==null?void 0:i.name)||"无"]}),e.jsxs("p",{children:["主题数量: ",n.length]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.length}),e.jsx("div",{className:"text-gray-400",children:"总主题数"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.filter(t=>t.isActive).length}),e.jsx("div",{className:"text-gray-400",children:"活跃主题"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.length}),e.jsx("div",{className:"text-gray-400",children:"总板块数"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"0"}),e.jsx("div",{className:"text-gray-400",children:"总文章数"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"主题列表"}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"暂无主题数据"}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"创建第一个主题"})]}):e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{size:12}),D(t.createdAt)]}),e.jsxs("span",{className:"text-gray-400",children:["所属板块: ",E(t.boardId)]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.isActive?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:t.isActive?"活跃":"已关闭"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[t.articleCount," 篇文章"]}),e.jsx("button",{onClick:()=>{A(t)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"编辑"}),e.jsx("button",{onClick:()=>{g(t.id)},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors",children:"删除"})]})]},t.id))})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"创建主题"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"所属板块"}),e.jsxs("select",{value:h,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"选择板块"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"主题名称"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>r({...s,name:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"输入主题名称"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"主题描述"}),e.jsx("textarea",{value:s.description,onChange:t=>r({...s,description:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",rows:3,placeholder:"输入主题描述"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"图标"}),e.jsx("input",{type:"text",value:s.icon,onChange:t=>r({...s,icon:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"选择图标"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"颜色"}),e.jsxs("select",{value:s.color,onChange:t=>r({...s,color:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"from-yellow-500 to-orange-500",children:"黄色到橙色"}),e.jsx("option",{value:"from-purple-500 to-pink-500",children:"紫色到粉色"}),e.jsx("option",{value:"from-indigo-500 to-blue-500",children:"靛蓝到蓝色"}),e.jsx("option",{value:"from-green-500 to-teal-500",children:"绿色到青色"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"创建"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"编辑主题"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"主题名称"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>r({...s,name:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"输入主题名称"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"主题描述"}),e.jsx("textarea",{value:s.description,onChange:t=>r({...s,description:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",rows:3,placeholder:"输入主题描述"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"图标"}),e.jsx("input",{type:"text",value:s.icon,onChange:t=>r({...s,icon:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"选择图标"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"颜色"}),e.jsxs("select",{value:s.color,onChange:t=>r({...s,color:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"from-yellow-500 to-orange-500",children:"黄色到橙色"}),e.jsx("option",{value:"from-purple-500 to-pink-500",children:"紫色到粉色"}),e.jsx("option",{value:"from-indigo-500 to-blue-500",children:"靛蓝到蓝色"}),e.jsx("option",{value:"from-green-500 to-teal-500",children:"绿色到青色"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:()=>{_()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"保存"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"确认删除"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"确定要删除这个主题吗？此操作不可撤销。"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:()=>T(u),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"删除"})]})]})})]})})};export{Y as default};
