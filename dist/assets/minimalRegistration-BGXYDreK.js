const c=(s,o)=>{try{console.log("最小MVP注册开始:",{username:s,password:o});const e=getCurrentUser();if(!e||!e.isGuest)return console.error("当前用户不是游客:",e),!1;const r=getAllUsers();console.log("所有用户:",r);const l=r.find(n=>n.username===s);if(l)return console.error("用户名已存在:",l),!1;const t={id:e.id,username:s,email:"",password:o,role:"user",userType:"regular",createdAt:e.createdAt,updatedAt:new Date().toISOString(),isActive:!0,isGuest:!1,guestId:void 0};return console.log("创建普通用户:",t),r.push(t),saveAllUsers(r),console.log("用户已保存到列表"),setCurrentUser(t),console.log("当前用户已更新"),!0}catch(e){return console.error("最小MVP注册失败:",e),!1}};export{c as m};
