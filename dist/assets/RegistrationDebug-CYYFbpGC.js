import{h as N,r as f,j as s,W as y,A as m}from"./index-BCw3XfMH.js";const w=()=>{var a,c,o,x,h,u;const{state:n,getUserDisplayName:g,isGuest:j}=N(),[t,p]=f.useState(null),b=()=>{const e=y(),r=m(),l={currentUser:e,allUsers:r,isGuest:j(),userCount:r.length,usernames:r.map(i=>i.username),currentUsername:e==null?void 0:e.username,currentUserType:e==null?void 0:e.userType,currentIsGuest:e==null?void 0:e.isGuest};p(l),console.log("注册调试信息:",l)},d=e=>{const r=m(),l=r.find(i=>i.username===e);return console.log(`检查用户名 "${e}":`,{allUsers:r,foundUser:l,exists:!!l}),l};return s.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-20",children:s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"注册功能调试"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"当前用户状态"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"用户ID:"})," ",((a=n.user)==null?void 0:a.id)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户名:"})," ",((c=n.user)==null?void 0:c.username)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"邮箱:"})," ",((o=n.user)==null?void 0:o.email)||"无"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户类型:"})," ",((x=n.user)==null?void 0:x.userType)||"无"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"是否游客:"})," ",(h=n.user)!=null&&h.isGuest?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"显示名称:"})," ",g()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"是否已认证:"})," ",n.isAuthenticated?"是":"否"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"角色:"})," ",((u=n.user)==null?void 0:u.role)||"无"]})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"调试操作"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:b,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"检查注册状态"}),s.jsx("button",{onClick:()=>d("admin"),className:"w-full py-3 px-4 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:'测试用户名 "admin" 是否存在'}),s.jsx("button",{onClick:()=>d("testuser"),className:"w-full py-3 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:'测试用户名 "testuser" 是否存在'})]})]}),t&&s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"调试信息"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"所有用户列表:"}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"用户总数:"})," ",t.userCount]}),s.jsxs("p",{children:[s.jsx("strong",{children:"用户名列表:"})," ",t.usernames.join(", ")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"当前用户:"}),s.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto",children:JSON.stringify(t.currentUser,null,2)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"所有用户详情:"}),s.jsx("pre",{className:"bg-gray-700 p-4 rounded text-sm overflow-auto max-h-96",children:JSON.stringify(t.allUsers,null,2)})]})]})]})]})})})};export{w as default};
