import{c as L,R as F,j as e,u as z,r as n,L as S,G as E,H as $,S as T,X as I}from"./index-BX79HJ6J.js";import{R as M,G as R,a as H,u as U,b as _,S as D}from"./useGameData-DVzPGby_.js";import{Z as P,T as A}from"./zap-BwpzoFBF.js";import{T as B}from"./trending-up-BWhkO-dE.js";import{U as q}from"./users-B0_D98AM.js";import"./Helmet-DHglXhQq.js";import"./home-DA2InE6o.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),G=({adSlot:l,adFormat:r="auto",adStyle:o={display:"block"},className:t=""})=>(F.useEffect(()=>{const a=document.createElement("script");a.async=!0,a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID",a.crossOrigin="anonymous",document.querySelector('script[src*="googlesyndication.com"]')||document.head.appendChild(a);try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch{console.log("AdSense not ready yet")}},[]),e.jsx("div",{className:`ad-banner ${t}`,children:e.jsx("ins",{className:"adsbygoogle",style:o,"data-ad-client":"ca-pub-YOUR_PUBLISHER_ID","data-ad-slot":l,"data-ad-format":r,"data-full-width-responsive":"true"})})),Y=({error:l,onRetry:r,className:o="",showRetry:t=!0})=>{const a=typeof l=="string"?l:l.message;return e.jsx("div",{className:`mb-8 p-4 bg-red-900/20 border border-red-500/30 rounded-lg ${o}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-400 font-semibold mb-1",children:"å‡ºç°é”™è¯¯"}),e.jsx("p",{className:"text-red-300 text-sm",children:a}),t&&r&&e.jsxs("button",{onClick:r,className:"mt-3 inline-flex items-center space-x-2 px-3 py-1.5 bg-red-600/20 hover:bg-red-600/30 text-red-300 rounded-md text-sm transition-colors",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:"é‡è¯•"})]})]})]})})},C=[{id:"all",name:"å…¨éƒ¨æ¸¸æˆ",icon:E,color:"from-blue-500 to-purple-600",hoverColor:"hover:from-blue-600 hover:to-purple-700",count:0},{id:"racing",name:"ç«é€Ÿæ¸¸æˆ",icon:P,color:"from-red-500 to-orange-600",hoverColor:"hover:from-red-600 hover:to-orange-700",count:0},{id:"action",name:"åŠ¨ä½œæ¸¸æˆ",icon:A,color:"from-green-500 to-teal-600",hoverColor:"hover:from-green-600 hover:to-teal-700",count:0},{id:"puzzle",name:"ç›Šæ™ºæ¸¸æˆ",icon:T,color:"from-yellow-500 to-amber-600",hoverColor:"hover:from-yellow-600 hover:to-amber-700",count:0},{id:"adventure",name:"å†’é™©æ¸¸æˆ",icon:B,color:"from-purple-500 to-pink-600",hoverColor:"hover:from-purple-600 hover:to-pink-700",count:0},{id:"multiplayer",name:"å¤šäººæ¸¸æˆ",icon:q,color:"from-indigo-500 to-blue-600",hoverColor:"hover:from-indigo-600 hover:to-blue-700",count:0}],Z=({games:l,allGames:r,isLoading:o=!1,error:t,onPlay:a,onToggleFavorite:c,onCategoryChange:d,selectedCategory:m="all",className:u="",emptyMessage:i="æš‚æ— æ¸¸æˆ"})=>{var h;z();const[x,y]=n.useState(m),[f,b]=n.useState(!1);n.useEffect(()=>{y(m)},[m]);const p=r&&r.length>0?r:l,w=C.map(s=>{const j=s.id==="all"?p.length:p.filter(g=>g.category===s.id).length;return{...s,count:j}}),N=n.useCallback(s=>{f||s===x||(b(!0),y(s),d==null||d(s),setTimeout(()=>{b(!1)},300))},[f,x,d]),v=l;return t?e.jsx(Y,{error:t,className:u}):o?e.jsx("div",{className:`flex items-center justify-center py-12 ${u}`,children:e.jsx(S,{text:"æ­£åœ¨åŠ è½½æ¸¸æˆ..."})}):e.jsxs("div",{className:`bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-6 shadow-2xl ${u}`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx(E,{className:"w-6 h-6 mr-2 text-yellow-400"}),"æ¸¸æˆåˆ†ç±»"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:w.map(s=>{const j=s.icon,g=x===s.id,k=f;return e.jsxs("button",{onClick:()=>N(s.id),disabled:k,className:`
                  relative group p-4 rounded-xl transition-all duration-300 transform
                  ${k?"opacity-50 cursor-not-allowed":g?`bg-gradient-to-r ${s.color} shadow-lg scale-105 hover:scale-110`:`bg-gray-700/50 hover:bg-gray-600/50 ${s.hoverColor} hover:scale-105 hover:shadow-lg`}
                  border-2 ${g?"border-white/30":"border-transparent hover:border-white/20"}
                `,children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`
                    p-3 rounded-lg transition-all duration-300
                    ${g?"bg-white/20":"bg-gray-600/50 group-hover:bg-white/10"}
                  `,children:e.jsx(j,{className:`w-6 h-6 ${g?"text-white":"text-gray-300 group-hover:text-white"}`})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm font-semibold ${g?"text-white":"text-gray-300 group-hover:text-white"}`,children:s.name}),e.jsxs("div",{className:`text-xs ${g?"text-white/80":"text-gray-400 group-hover:text-white/80"}`,children:[s.count," ä¸ªæ¸¸æˆ"]})]})]}),g&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-pulse"}),f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-xl",children:e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})})]},s.id)})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white",children:[x==="all"?"æ‰€æœ‰æ¸¸æˆ":(h=C.find(s=>s.id===x))==null?void 0:h.name,e.jsxs("span",{className:"ml-2 text-gray-400 text-sm",children:["(",v.length," ä¸ªæ¸¸æˆ)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"ç‚¹å‡»æ”¶è—å–œæ¬¢çš„æ¸¸æˆ"})]})]}),v.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ğŸ®"}),e.jsx("p",{className:"text-gray-400 text-lg",children:i}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"è¯•è¯•é€‰æ‹©å…¶ä»–åˆ†ç±»"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(s=>e.jsx(R,{children:e.jsx(H,{game:s,variant:"homepage",onPlay:a,onToggleFavorite:c,showRating:!0,showControls:!0})},s.id))})]})]})},K=()=>{const[l,r]=n.useState(!1);n.useEffect(()=>{const t=()=>{const a=!!document.fullscreenElement;r(a)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t),()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t)}},[]);const o=n.useCallback(async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(t){console.error("å…¨å±åˆ‡æ¢å¤±è´¥:",t)}},[]);return{isFullscreen:l,toggleFullscreen:o}},W=({game:l,isOpen:r,onClose:o,isLoading:t=!1,onLoadComplete:a})=>{const{isFullscreen:c,toggleFullscreen:d}=K(),[m,u]=n.useState(!0);return n.useEffect(()=>{const i=x=>{x.key==="Escape"&&r&&o()};if(r)return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,o]),n.useEffect(()=>{if(r&&l){u(!0);const i=setTimeout(()=>{u(!1),a==null||a()},2e3);return()=>clearTimeout(i)}},[r,l,a]),!r||!l?null:e.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col animate-in fade-in duration-300",onClick:o,children:[e.jsx("div",{className:"flex-shrink-0 z-10",onClick:i=>i.stopPropagation(),children:e.jsx("div",{className:"bg-gradient-to-b from-black/90 to-transparent p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white drop-shadow-lg",children:l.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"p-3 bg-black/50 hover:bg-black/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-white/40",title:c?"é€€å‡ºå…¨å±":"å…¨å±",children:c?"â¤“":"â¤¢"}),e.jsx("button",{onClick:o,className:"p-3 bg-black/50 hover:bg-red-600/70 backdrop-blur-md rounded-xl text-white transition-all duration-200 hover:scale-110 hover:shadow-lg border border-white/20 hover:border-red-400/60",title:"å…³é—­æ¸¸æˆ",children:e.jsx(I,{size:20})})]})]})})}),e.jsxs("div",{className:"flex-1 relative",onClick:i=>i.stopPropagation(),children:[(t||m)&&e.jsx("div",{className:"absolute top-4 right-4 z-30",children:e.jsx(G,{adSlot:"0987654321",adFormat:"rectangle",className:"w-48 h-32 bg-gray-800 rounded-lg"})}),e.jsxs("div",{className:"w-full h-full bg-black relative overflow-hidden",children:[(t||m)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",children:e.jsx(S,{text:"æ­£åœ¨åŠ è½½æ¸¸æˆ..."})}),e.jsxs("div",{className:"w-full h-full relative game-iframe-container",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                .game-iframe-container iframe {
                  width: 100% !important;
                  height: 100% !important;
                  border: none !important;
                  outline: none !important;
                  position: relative;
                  z-index: 1;
                }
                
                .game-iframe-container iframe {
                  filter: contrast(1.05) brightness(1.02) saturate(1.1);
                  transform: scale(1.01);
                  transform-origin: center;
                }
                
                .game-iframe-container::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  right: 0;
                  height: 80px;
                  background: linear-gradient(to bottom, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
                
                .game-iframe-container::after {
                  content: '';
                  position: absolute;
                  bottom: 0;
                  left: 0;
                  right: 0;
                  height: 100px;
                  background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
                  z-index: 10;
                  pointer-events: none;
                }
              `}}),e.jsx("div",{className:"w-full h-full relative",dangerouslySetInnerHTML:{__html:l.iframe}})]})]})]})]})},X=()=>{const[l,r]=n.useState(null),[o,t]=n.useState(!1),[a,c]=n.useState(!1),d=n.useCallback(i=>{r(i),t(!0),c(!0)},[]),m=n.useCallback(()=>{r(null),t(!1),c(!1)},[]),u=n.useCallback(()=>{c(!1)},[]);return{selectedGame:l,isModalOpen:o,isGameLoading:a,openGame:d,closeGame:m,handleLoadComplete:u}};function ae({}){const{games:l,filteredGames:r,isLoading:o,error:t,selectedCategory:a}=U(),{toggleFavorite:c,setCategory:d}=_(),{selectedGame:m,isModalOpen:u,isGameLoading:i,openGame:x,closeGame:y,handleLoadComplete:f}=X(),[b,p]=n.useState(a);n.useEffect(()=>{p(a)},[a]);const w=h=>{const s=r.find(j=>j.id===h);s&&x(s)},N=h=>{c(h)},v=n.useCallback(h=>{h!==b&&(p(h),d(h))},[b,d]);return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx(D,{title:"æ¸¸æˆä¸­å¿ƒ - å…è´¹åœ¨çº¿æ¸¸æˆ",description:"å‘ç°æœ€çƒ­é—¨çš„åœ¨çº¿æ¸¸æˆï¼Œç«‹å³å¼€å§‹ä½ çš„æ¸¸æˆä¹‹æ—…ï¼",keywords:"åœ¨çº¿æ¸¸æˆ,æµè§ˆå™¨æ¸¸æˆ,å…è´¹æ¸¸æˆ,æ¸¸æˆä¸­å¿ƒ"}),e.jsxs("div",{className:"container mx-auto px-4 py-8 pt-24",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-yellow-400 mb-4",children:"ğŸ® å…è´¹åœ¨çº¿æ¸¸æˆ"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"å‘ç°æœ€çƒ­é—¨çš„åœ¨çº¿æ¸¸æˆï¼Œç«‹å³å¼€å§‹ä½ çš„æ¸¸æˆä¹‹æ—…ï¼"})]}),e.jsx("div",{className:"mb-8",children:e.jsx(G,{adSlot:"1234567890",adFormat:"horizontal",className:"w-full h-32 bg-gray-800 rounded-lg flex items-center justify-center text-gray-400"})}),e.jsx(Z,{games:r,allGames:l,isLoading:o,error:t,onPlay:w,onToggleFavorite:N,onCategoryChange:v,selectedCategory:b})]}),e.jsx(W,{game:m,isOpen:u,onClose:y,isLoading:i,onLoadComplete:f})]})}export{ae as default};
