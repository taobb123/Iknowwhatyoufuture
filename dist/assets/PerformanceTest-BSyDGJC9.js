import{r as g,j as e}from"./index-DjexH7CO.js";const y=()=>{const d=t=>({id:`user_${t}`,username:`testuser${t}`,email:`test${t}@example.com`,password:"hashedpassword",role:"user",userType:"regular",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o=t=>({id:`article_${t}`,title:`æµ‹è¯•æ–‡ç« æ ‡é¢˜ ${t}`,content:"è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« çš„å†…å®¹ã€‚".repeat(100),category:"æµ‹è¯•åˆ†ç±»",authorId:`user_${t%10}`,authorType:"regular",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),n=(t,l)=>{console.log(`
=== æµ‹è¯• ${l} (${t} æ¡è®°å½•) ===`);const a=performance.now(),s=[];for(let x=0;x<t;x++)l==="users"?s.push(d(x)):l==="articles"&&s.push(o(x));const c=performance.now();console.log(`æ•°æ®ç”Ÿæˆè€—æ—¶: ${(c-a).toFixed(2)}ms`);const u=performance.now();localStorage.setItem(`test_${l}`,JSON.stringify(s));const h=performance.now();console.log(`å†™å…¥ localStorage è€—æ—¶: ${(h-u).toFixed(2)}ms`);const f=performance.now(),j=localStorage.getItem(`test_${l}`);JSON.parse(j||"[]");const p=performance.now();console.log(`è¯»å–å¹¶è§£æè€—æ—¶: ${(p-f).toFixed(2)}ms`);const b=new Blob([JSON.stringify(s)]).size;return console.log(`æ•°æ®å¤§å°: ${(b/1024).toFixed(2)}KB`),localStorage.removeItem(`test_${l}`),{generateTime:c-a,writeTime:h-u,readTime:p-f,dataSize:b}},i=[10,50,100,500,1e3],r={};console.log(`ğŸš€ å¼€å§‹ localStorage æ€§èƒ½æµ‹è¯•...
`),i.forEach(t=>{r[t]={users:n(t,"users"),articles:n(t,"articles")}}),console.log(`
ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœæ±‡æ€»:`),console.log("æ•°æ®é‡	ç”¨æˆ·å†™å…¥	ç”¨æˆ·è¯»å–	æ–‡ç« å†™å…¥	æ–‡ç« è¯»å–	æ–‡ç« å¤§å°"),console.log("-----	--------	--------	--------	--------	--------"),i.forEach(t=>{const l=r[t].users,a=r[t].articles;console.log(`${t}	${l.writeTime.toFixed(2)}ms	${l.readTime.toFixed(2)}ms	${a.writeTime.toFixed(2)}ms	${a.readTime.toFixed(2)}ms	${(a.dataSize/1024).toFixed(2)}KB`)}),console.log(`
ğŸ’¡ æ€§èƒ½å»ºè®®:`);const m=r[1e3].articles.dataSize/1024;return m>1e3?console.log("âš ï¸  æ–‡ç« æ•°æ®è¶…è¿‡ 1MBï¼Œå»ºè®®ä¼˜åŒ–å­˜å‚¨ç­–ç•¥"):m>500?console.log("ğŸŸ¡ æ–‡ç« æ•°æ®è¾ƒå¤§ï¼Œå»ºè®®è€ƒè™‘åˆ†é¡µåŠ è½½"):console.log("âœ… æ•°æ®é‡åœ¨åˆç†èŒƒå›´å†…ï¼Œæ€§èƒ½è‰¯å¥½"),r},N=()=>{const d=["gamehub_users","simple_users","gamehub_articles","gamehub_boards","gamehub_topics","system_config"];let o=0;return console.log(`
ğŸ“ å½“å‰ localStorage æ•°æ®å¤§å°:`),console.log("é”®å			å¤§å°"),console.log("----			----"),d.forEach(n=>{const i=localStorage.getItem(n);if(i){const r=new Blob([i]).size;o+=r,console.log(`${n}		${(r/1024).toFixed(2)}KB`)}}),console.log(`
æ€»å¤§å°: ${(o/1024).toFixed(2)}KB`),o>5e3?console.log("âš ï¸  æ•°æ®é‡è¾ƒå¤§ï¼Œå»ºè®®è¿ç§»åˆ°æ•°æ®åº“"):o>1e3?console.log("ğŸŸ¡ æ•°æ®é‡ä¸­ç­‰ï¼Œå»ºè®®ç›‘æ§æ€§èƒ½"):console.log("âœ… æ•°æ®é‡åˆç†ï¼Œæ€§èƒ½è‰¯å¥½"),o},w=()=>{const[d,o]=g.useState(0),[n,i]=g.useState(null),[r,m]=g.useState(!1);g.useEffect(()=>{const s=N();o(s)},[]);const t=async()=>{m(!0);try{const s=y();i(s)}catch(s){console.error("æ€§èƒ½æµ‹è¯•å¤±è´¥:",s)}finally{m(!1)}},a=(s=>s>5e3?{status:"warning",message:"âš ï¸ æ•°æ®é‡è¾ƒå¤§ï¼Œå»ºè®®è¿ç§»åˆ°æ•°æ®åº“",color:"text-red-600"}:s>1e3?{status:"caution",message:"ğŸŸ¡ æ•°æ®é‡ä¸­ç­‰ï¼Œå»ºè®®ç›‘æ§æ€§èƒ½",color:"text-yellow-600"}:{status:"good",message:"âœ… æ•°æ®é‡åˆç†ï¼Œæ€§èƒ½è‰¯å¥½",color:"text-green-600"})(d);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"ğŸš€ localStorage æ€§èƒ½æµ‹è¯•"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"å½“å‰æ•°æ®çŠ¶æ€"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-lg font-medium",children:"æ€»æ•°æ®å¤§å°:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(d/1024).toFixed(2)," KB"]})]}),e.jsx("div",{className:`text-lg font-medium ${a.color}`,children:a.message})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"æ€§èƒ½å‹åŠ›æµ‹è¯•"}),e.jsx("button",{onClick:t,disabled:r,className:`px-6 py-3 rounded-lg font-medium transition-colors ${r?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r?"æµ‹è¯•ä¸­...":"å¼€å§‹æ€§èƒ½æµ‹è¯•"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"æµ‹è¯•ä¸åŒæ•°æ®é‡ä¸‹çš„è¯»å†™æ€§èƒ½"})]}),n&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"æµ‹è¯•ç»“æœ"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"æ•°æ®é‡"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"ç”¨æˆ·å†™å…¥"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"ç”¨æˆ·è¯»å–"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"æ–‡ç« å†™å…¥"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"æ–‡ç« è¯»å–"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"æ–‡ç« å¤§å°"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.entries(n).map(([s,c])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[c.users.writeTime.toFixed(2),"ms"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[c.users.readTime.toFixed(2),"ms"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[c.articles.writeTime.toFixed(2),"ms"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[c.articles.readTime.toFixed(2),"ms"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(c.articles.dataSize/1024).toFixed(2),"KB"]})]},s))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ å¦‚æœæ•°æ®é‡è¶…è¿‡ 1MBï¼Œå»ºè®®è¿ç§»åˆ°æ•°æ®åº“"}),e.jsx("li",{children:"â€¢ è€ƒè™‘å®ç°æ•°æ®åˆ†é¡µåŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®"}),e.jsx("li",{children:"â€¢ å®šæœŸæ¸…ç†æ— ç”¨çš„ç¼“å­˜æ•°æ®"}),e.jsx("li",{children:"â€¢ ä½¿ç”¨ IndexedDB æ›¿ä»£ localStorageï¼ˆæ”¯æŒæ›´å¤§å­˜å‚¨ï¼‰"}),e.jsx("li",{children:"â€¢ å®ç°æ•°æ®å‹ç¼©å’Œå»é‡æœºåˆ¶"})]})]})]})})})};export{w as default};
