import{c as $,r as i,j as e,U as D,a as me,b as Ne,C as Y,E as re,H as ae,S as le,d as we,G as he,u as ke,e as Ce,i as Ae,g as ie,f as Se}from"./index-BCw3XfMH.js";import{M as ne}from"./MarkdownRenderer-By8FJgtO.js";import{T as ce}from"./trending-up-kt1TWdQO.js";import{P as ge}from"./plus-B-9IxP9O.js";import{A as oe}from"./arrow-left-C4yDye0w.js";import{S as de}from"./share-2-C4Xe08Il.js";import{C as ze}from"./code-BovoTn7x.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=$("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=$("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=$("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=$("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=$("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Ee=[{id:"全部",name:"全部攻略",icon:me,color:"from-blue-600 to-purple-600",hoverColor:"hover:from-blue-600/50"},{id:"前端开发",name:"前端开发",icon:ze,color:"from-green-600 to-teal-600",hoverColor:"hover:from-green-600/50"},{id:"后端开发",name:"后端开发",icon:Le,color:"from-orange-600 to-red-600",hoverColor:"hover:from-orange-600/50"},{id:"游戏设计",name:"游戏设计",icon:Te,color:"from-purple-600 to-pink-600",hoverColor:"hover:from-purple-600/50"},{id:"AI/ML",name:"AI/ML",icon:$e,color:"from-indigo-600 to-blue-600",hoverColor:"hover:from-indigo-600/50"},{id:"工具使用",name:"工具使用",icon:Ie,color:"from-gray-600 to-slate-600",hoverColor:"hover:from-gray-600/50"},{id:"王者荣耀",name:"王者荣耀",icon:he,color:"from-red-600 to-orange-600",hoverColor:"hover:from-red-600/50"}],Pe=({searchQuery:k,onSearchChange:V,sortBy:p,onSortChange:I,selectedCategory:A,onCategoryChange:E,guides:f,filteredGuides:g,paginatedGuides:T,currentPage:d,totalPages:m,guidesPerPage:S,onPageChange:P,onPrevPage:H,onNextPage:R,hotGames:G,newGames:u,userInfo:b,onPublishClick:y,className:q=""})=>{var se,te;const[j,z]=i.useState(null),[B,M]=i.useState(!1),[v,Q]=i.useState(!1),[U,C]=i.useState(0),[F,l]=i.useState(0),[a,n]=i.useState(!1),[x,L]=i.useState({}),W=i.useRef(null),c=j?f.find(s=>s.id===j):null,Z=(s=100)=>{setTimeout(()=>{W.current&&W.current.scrollIntoView({behavior:"smooth",block:"start"})},s)},ue=s=>{const r=f.find(t=>t.id===s);if(!r){L(t=>({...t,[s]:"文章不存在或正在加载中"})),console.warn(`文章不存在: ${s}`),setTimeout(()=>{L(t=>{const h={...t};return delete h[s],h})},3e3);return}L(t=>{const h={...t};return delete h[s],h}),z(s),M(!0),C(r.likes),l(r.views),Z(100)},pe=()=>{M(!1),z(null)},X=()=>{if(!j)return null;const s=g.findIndex(r=>(r.articleId||r.id.toString())===j);return s>0?g[s-1]:null},_=()=>{if(!j)return null;const s=g.findIndex(r=>(r.articleId||r.id.toString())===j);return s<g.length-1?g[s+1]:null},N=()=>X()!==null,w=()=>_()!==null,fe=()=>{if(!N()||a)return;const s=X();if(s){const r=s.articleId||s.id.toString();if(!getArticleById(r)){console.warn(`上一篇文章不存在: ${r}`);return}n(!0),z(r),M(!0),C(Math.floor(Math.random()*1e3)+100),l(Math.floor(Math.random()*5e3)+500),Z(150),setTimeout(()=>n(!1),300)}},be=()=>{if(!w()||a)return;const s=_();if(s){const r=s.articleId||s.id.toString();if(!getArticleById(r)){console.warn(`下一篇文章不存在: ${r}`);return}n(!0),z(r),M(!0),C(Math.floor(Math.random()*1e3)+100),l(Math.floor(Math.random()*5e3)+500),Z(150),setTimeout(()=>n(!1),300)}},ye=()=>{Q(!v),C(s=>v?s-1:s+1)},ee=()=>{if(navigator.share)navigator.share({title:c==null?void 0:c.title,text:c==null?void 0:c.meta.description,url:window.location.href});else{navigator.clipboard.writeText(window.location.href);const s=document.createElement("div");s.innerHTML=`
        <div style="
          position: fixed;
          top: 20px;
          right: 20px;
          background: #10B981;
          color: white;
          padding: 16px 24px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          z-index: 10000;
          font-family: system-ui, -apple-system, sans-serif;
          font-size: 14px;
          font-weight: 500;
          animation: slideIn 0.3s ease-out;
        ">
          ✅ 链接已复制到剪贴板
        </div>
        <style>
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
        </style>
      `,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},3e3)}},je=Ee.map(s=>({...s,count:s.id==="全部"?f.length:f.filter(r=>r.category===s.id).length})),ve=(s,r)=>{const t=[];if(s<=5)for(let o=1;o<=s;o++)t.push(o);else{const o=Math.max(1,r-2),K=Math.min(s,o+5-1);o>1&&(t.push(1),o>2&&t.push("..."));for(let O=o;O<=K;O++)t.push(O);K<s&&(K<s-1&&t.push("..."),t.push(s))}return t},J=s=>{const r=new Date(s),h=Math.abs(new Date().getTime()-r.getTime()),o=Math.ceil(h/(1e3*60*60*24));return o===1?"昨天":o<7?`${o}天前`:o<30?`${Math.ceil(o/7)}周前`:r.toLocaleDateString("zh-CN")};return e.jsxs("div",{className:`max-w-7xl mx-auto grid grid-cols-12 gap-6 p-6 w-full ${q}`,children:[e.jsx("div",{className:"col-span-9 bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-6 shadow-2xl",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 h-full",children:[e.jsxs("div",{className:"col-span-3 space-y-6",children:[e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(D,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:b.name}),e.jsx("p",{className:"text-sm text-gray-400",children:b.level})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:b.guides}),e.jsx("div",{className:"text-gray-400",children:"攻略"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:b.likes}),e.jsx("div",{className:"text-gray-400",children:"点赞"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:b.collections}),e.jsx("div",{className:"text-gray-400",children:"收藏"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 mb-3 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"攻略分类"]}),je.map(s=>{const r=s.icon,t=A===s.id;return e.jsx("button",{onClick:()=>E(s.id),className:`
                      w-full text-left px-4 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg
                      ${t?`bg-gradient-to-r ${s.color} shadow-lg scale-105 text-white`:`bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white ${s.hoverColor}`}
                      border-2 ${t?"border-white/30":"border-transparent hover:border-white/20"}
                    `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{size:18}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("span",{className:"text-xs bg-white/20 rounded-full px-2 py-1",children:s.count})]})},s.id)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 mb-3 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"热门话题"]}),e.jsx("div",{className:"space-y-2",children:["React游戏开发","TypeScript技巧","Vue组件设计","Node.js服务器"].map(s=>e.jsxs("div",{className:"text-sm text-gray-300 hover:text-white cursor-pointer hover:bg-gray-700/50 rounded-lg px-3 py-2 transition-colors",children:["#",s]},s))})]})]}),e.jsxs("div",{className:"col-span-9 flex flex-col",children:[e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"搜索攻略、游戏、作者...",value:k,onChange:s=>V(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600"})]}),e.jsxs("select",{value:p,onChange:s=>I(s.target.value),className:"px-4 py-2 bg-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600",children:[e.jsx("option",{value:"最新",children:"最新"}),e.jsx("option",{value:"热门",children:"热门"}),e.jsx("option",{value:"最多点赞",children:"最多点赞"}),e.jsx("option",{value:"最多评论",children:"最多评论"})]}),y&&e.jsxs("button",{onClick:y,className:"bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(ge,{size:20}),"发表"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["找到 ",g.length," 篇攻略，当前显示第 ",d," 页，共 ",m," 页"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[B&&c?e.jsxs("div",{className:"bg-gray-800/50 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gray-700/50 border-b border-gray-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:pe,className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(oe,{size:20}),"返回列表"]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(de,{size:18}),"分享"]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-full",children:c.category}),e.jsx("span",{className:"text-gray-400 text-sm",children:"•"}),e.jsx("span",{className:"text-gray-400 text-sm",children:J(c.createdAt)})]}),e.jsx("h1",{className:"text-3xl font-bold mb-4 leading-tight text-white",children:c.title}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:16}),e.jsx("span",{children:c.authorType==="guest"?"游客":c.author})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{size:16}),e.jsxs("span",{children:[Math.ceil(c.content.length/500)," 分钟阅读"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{size:16}),e.jsxs("span",{children:[F," 次浏览"]})]})]})]}),e.jsx("article",{className:"max-w-none",children:e.jsx("div",{ref:W,className:"article-content",children:e.jsx(ne,{content:c.content})})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:ye,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(ae,{size:18,className:v?"fill-current":""}),e.jsx("span",{children:U})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-300 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"评论"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-300 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(le,{size:18}),e.jsx("span",{children:"收藏"})]})]}),e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors",children:[e.jsx(de,{size:18}),e.jsx("span",{children:"分享文章"})]})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(we,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"标签："})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((s,r)=>e.jsx("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 text-sm rounded-full hover:bg-gray-600 transition-colors cursor-pointer",children:s},r))})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("button",{onClick:fe,disabled:!N()||a,className:`flex items-center gap-3 p-4 rounded-lg transition-all duration-300 w-full ${!N()||a?"bg-gray-600/30 cursor-not-allowed opacity-50":"bg-gray-700/50 hover:bg-gray-600/50 hover:scale-105"}`,children:[e.jsx(oe,{size:20,className:`${!N()||a?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`text-sm mb-1 ${!N()||a?"text-gray-500":"text-gray-400"}`,children:a?"切换中...":N()?"上一篇":"已是第一篇"}),e.jsx("div",{className:`font-medium line-clamp-2 ${!N()||a?"text-gray-500":"text-white"}`,children:N()?(se=X())==null?void 0:se.title:"没有更多文章"})]})]})}),e.jsx("div",{className:"flex-1 ml-4",children:e.jsxs("button",{onClick:be,disabled:!w()||a,className:`flex items-center gap-3 p-4 rounded-lg transition-all duration-300 w-full ${!w()||a?"bg-gray-600/30 cursor-not-allowed opacity-50":"bg-gray-700/50 hover:bg-gray-600/50 hover:scale-105"}`,children:[e.jsxs("div",{className:"text-right flex-1",children:[e.jsx("div",{className:`text-sm mb-1 ${!w()||a?"text-gray-500":"text-gray-400"}`,children:a?"切换中...":w()?"下一篇":"已是最后一篇"}),e.jsx("div",{className:`font-medium line-clamp-2 ${!w()||a?"text-gray-500":"text-white"}`,children:w()?(te=_())==null?void 0:te.title:"没有更多文章"})]}),e.jsx(Me,{size:20,className:`${!w()||a?"text-gray-500":"text-gray-400"}`})]})})]})})]})]}):e.jsx(e.Fragment,{children:T.map(s=>{const r=s.id,t=x[r];return e.jsx("div",{className:`rounded-lg p-6 transition-colors backdrop-blur-sm ${t?"bg-red-900/20 border border-red-500/50":"bg-gray-700/50 hover:bg-gray-600/50"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-lg flex items-center justify-center ${t?"bg-red-600/50":"bg-gray-600/50"}`,children:e.jsx(he,{size:24,className:t?"text-red-400":"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:`text-lg font-semibold cursor-pointer transition-colors ${t?"text-red-300 hover:text-red-200":"text-white hover:text-blue-400"}`,onClick:()=>ue(r),children:s.title}),e.jsx("span",{className:`px-2 py-1 text-xs rounded text-white ${t?"bg-red-600":"bg-blue-600"}`,children:s.category})]}),t&&e.jsx("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-200 text-sm",children:t})]})}),e.jsx("div",{className:`mb-3 line-clamp-2 ${t?"text-red-300/70":"text-gray-400"}`,children:e.jsx(ne,{content:s.content.substring(0,150)+"..."})}),e.jsxs("div",{className:`flex items-center gap-4 text-sm mb-3 ${t?"text-red-400/70":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{size:16}),s.authorType==="guest"?"游客":s.author]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{size:16}),J(s.createdAt)]}),s.gameTitle&&e.jsx("span",{className:t?"text-red-400":"text-blue-400",children:s.gameTitle})]}),e.jsxs("div",{className:`flex items-center gap-4 text-sm ${t?"text-red-400/70":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(re,{size:16}),s.views," 次浏览"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{size:16}),s.likes," 点赞"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xe,{size:16}),s.comments," 评论"]})]}),e.jsx("div",{className:"flex gap-1 mt-3",children:s.tags.map(h=>e.jsxs("span",{className:`px-2 py-1 text-xs rounded ${t?"bg-red-600/50 text-red-200":"bg-gray-600/50 text-gray-300"}`,children:["#",h]},h))})]})]})},s.id)})}),!B&&m>1&&e.jsx("div",{className:"bg-gray-700/50 rounded-lg p-6 mt-6 backdrop-blur-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-base text-gray-300 text-center",children:["显示第 ",e.jsx("span",{className:"font-semibold text-white",children:(d-1)*S+1})," - ",e.jsx("span",{className:"font-semibold text-white",children:Math.min(d*S,g.length)})," 条，共 ",e.jsx("span",{className:"font-semibold text-blue-400",children:g.length})," 条记录"]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:H,disabled:d===1,className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 ${d===1?"bg-gray-600/30 text-gray-500 cursor-not-allowed":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:"上一页"}),e.jsx("div",{className:"flex items-center gap-2",children:ve(m,d).map(s=>e.jsx("button",{onClick:()=>P(Number(s)),className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 min-w-[44px] ${d===s?"bg-blue-600 text-white shadow-lg scale-105":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:s},s))}),e.jsx("button",{onClick:R,disabled:d===m,className:`px-4 py-2.5 rounded-lg text-base font-medium transition-all duration-200 ${d===m?"bg-gray-600/30 text-gray-500 cursor-not-allowed":"bg-gray-600/50 text-white hover:bg-gray-500/50 hover:scale-105"}`,children:"下一页"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4 border-t border-gray-600",children:[e.jsx("span",{className:"text-base text-gray-300",children:"快速跳转："}),e.jsx("select",{value:d,onChange:s=>P(Number(s.target.value)),className:"px-4 py-2 bg-gray-600/50 rounded-lg text-white text-base focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600 hover:bg-gray-500/50 transition-colors",children:Array.from({length:m},(s,r)=>r+1).map(s=>e.jsxs("option",{value:s,children:["第 ",s," 页"]},s))})]})]})})]})]})]})}),e.jsxs("div",{className:"col-span-3 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{size:20,className:"text-red-500"}),e.jsx("h3",{className:"font-semibold text-white",children:"热门游戏"})]}),e.jsx("div",{className:"space-y-3",children:G.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-sm font-bold text-white",children:r+1}),e.jsx("img",{src:s.image,alt:s.title,className:"w-10 h-10 rounded object-cover",onError:t=>{t.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400",children:s.category})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-400",children:[e.jsx(le,{size:12}),((s.likes||0)/1e3).toFixed(1),"k"]})]},s.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Y,{size:20,className:"text-green-500"}),e.jsx("h3",{className:"font-semibold text-white",children:"最新游戏"})]}),e.jsx("div",{className:"space-y-3",children:u.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-sm font-bold text-white",children:r+1}),e.jsx("img",{src:s.image,alt:s.title,className:"w-10 h-10 rounded object-cover",onError:t=>{t.target.src="/car-racing.webp"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400",children:s.category})]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.addedAt?J(s.addedAt):"最近"})]},s.id))})]})]})]})},Qe=()=>{const k=ke(),V=Ce(),[p,I]=i.useState(""),[A,E]=i.useState("全部"),[f,g]=i.useState("最新"),[T,d]=i.useState([]),[m,S]=i.useState([]),[P,H]=i.useState([]),[R,G]=i.useState([]),[u,b]=i.useState(1),[y]=i.useState(5),[q,j]=i.useState(1),[z,B]=i.useState([]);i.useEffect(()=>{if(k.state){const l=k.state;l.searchQuery&&I(l.searchQuery),l.selectedCategory&&E(l.selectedCategory)}},[k.state]),i.useEffect(()=>{Ae(),setTimeout(()=>{const x=ie();d(x),S(x)},100);const l=Se.map(x=>({...x,category:x.category||"未分类",thumbnail:x.image||"/car-racing.webp"})),a=[...l].sort((x,L)=>L.likes-x.likes).slice(0,10);H(a);const n=[...l].sort(()=>Math.random()-.5).slice(0,10);G(n)},[]),i.useEffect(()=>{let l=T;switch(A!=="全部"&&(l=l.filter(a=>a.category===A)),p.trim()&&(l=l.filter(a=>a.title.toLowerCase().includes(p.toLowerCase())||a.content.toLowerCase().includes(p.toLowerCase())||a.tags.some(n=>n.toLowerCase().includes(p.toLowerCase())))),f){case"最新":l.sort((a,n)=>new Date(n.createdAt).getTime()-new Date(a.createdAt).getTime());break;case"热门":l.sort((a,n)=>n.likes-a.likes);break;case"最多浏览":l.sort((a,n)=>n.views-a.views);break;case"最多评论":l.sort((a,n)=>n.comments-a.comments);break}S(l),b(1)},[T,A,p,f]),i.useEffect(()=>{const l=Math.ceil(m.length/y);j(l);const a=(u-1)*y,n=a+y,x=m.slice(a,n);B(x)},[m,u,y]);const M={name:"游戏玩家",level:"Lv.5 攻略达人",guides:12,likes:156,collections:23},v=l=>{b(l),window.scrollTo({top:0,behavior:"smooth"})},Q=()=>{u>1&&v(u-1)},U=()=>{u<q&&v(u+1)},C=()=>{V("/article-editor")},F=()=>{const l=ie();d(l),S(l)};return i.useEffect(()=>{k.pathname==="/game-hub"&&setTimeout(()=>{F()},100)},[k.pathname]),e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsx("div",{className:"pt-16"}),e.jsx("div",{className:"bg-gray-800 p-4 border-b border-gray-700",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"🎮 游戏攻略社区"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:C,className:"bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(ge,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"发布攻略"})]}),e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:e.jsx(D,{size:18})})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(Pe,{searchQuery:p,onSearchChange:I,sortBy:f,onSortChange:g,selectedCategory:A,onCategoryChange:E,guides:T,filteredGuides:m,paginatedGuides:z,currentPage:u,totalPages:q,guidesPerPage:y,onPageChange:v,onPrevPage:Q,onNextPage:U,hotGames:P,newGames:R,userInfo:M,onPublishClick:C})})]})};export{Qe as default};
