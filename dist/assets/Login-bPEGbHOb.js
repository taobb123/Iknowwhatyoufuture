import{h as v,f as N,k as E,a as k,r as l,p as L,j as e,q as S,U as A,s as C,o as D,E as I}from"./index-BAUYqbCF.js";const F=()=>{const i=v(),c=N(),{login:g,state:d}=E(),{t:s}=k(),[a,b]=l.useState({username:"",password:""}),[u,y]=l.useState(!1),[m,o]=l.useState(""),[h,p]=l.useState(!1);l.useEffect(()=>{L()},[]),l.useEffect(()=>{var r,t;if(d.isAuthenticated){const n=((t=(r=c.state)==null?void 0:r.from)==null?void 0:t.pathname)||"/";i(n,{replace:!0})}},[d.isAuthenticated,i,c.state]);const f=r=>{const{name:t,value:n}=r.target;b(x=>({...x,[t]:n})),m&&o("")},j=async r=>{var t,n;if(r.preventDefault(),!a.username.trim()||!a.password.trim()){o("请输入用户名和密码");return}p(!0),o("");try{if(await g(a.username.trim(),a.password)){const w=((n=(t=c.state)==null?void 0:t.from)==null?void 0:n.pathname)||"/";i(w,{replace:!0})}else o("用户名或密码错误")}catch{o("登录失败，请重试")}finally{p(!1)}};return d.isLoading?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{children:s("common.loading")})]})}):e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-600",children:e.jsx(S,{className:"h-6 w-6"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:s("auth.login")}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"请输入您的管理员凭据"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:s("auth.username")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:a.username,onChange:f,className:"appearance-none rounded-lg relative block w-full pl-10 pr-3 py-3 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:s("auth.username")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:s("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(C,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:u?"text":"password",required:!0,value:a.password,onChange:f,className:"appearance-none rounded-lg relative block w-full pl-10 pr-10 py-3 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:s("auth.password")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!u),children:u?e.jsx(D,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"}):e.jsx(I,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"})})]})]})]}),m&&e.jsx("div",{className:"bg-red-600/20 border border-red-600 text-red-400 px-4 py-3 rounded-lg text-sm",children:m}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("common.loading")]}):s("auth.login")})})]})]})})};export{F as default};
